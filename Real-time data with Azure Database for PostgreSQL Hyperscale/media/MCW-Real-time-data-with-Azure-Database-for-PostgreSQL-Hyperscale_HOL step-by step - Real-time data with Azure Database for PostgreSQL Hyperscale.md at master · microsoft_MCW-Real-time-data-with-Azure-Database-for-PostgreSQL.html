<!DOCTYPE html>
<!-- saved from url=(0225)https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
  <link rel="dns-prefetch" href="https://github.githubassets.com/">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com/">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">



  <link crossorigin="anonymous" media="all" integrity="sha512-rr6qkY7tiSSypi7gHiK5VBwtkKbR+ClgZppUh2TNaFOhHdZlYupFjSl4WAqQyBCMUNHoqXYvfD6acShJofTJHQ==" rel="stylesheet" href="https://github.githubassets.com/assets/frameworks-9b9da82234dd0dde0ef8dab88ceabed8.css">
  
    <link crossorigin="anonymous" media="all" integrity="sha512-ltKKHsKubtqH19vShg8msQpBy1O0Ezj9nOY2+OUt2c4MHPFhEJeIftArn70soPQqIcg8A1BZneasCP3XzN5r4Q==" rel="stylesheet" href="https://github.githubassets.com/assets/github-b6d18623fe69182cfd3143ad01689439.css">
    
    
    
    

  <meta name="viewport" content="width=device-width">
  
  <title>MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/HOL step-by step - Real-time data with Azure Database for PostgreSQL Hyperscale.md at master ¬∑ microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale</title>
    <meta name="description" content="Real-time data with Azure Database for PostgreSQL Hyperscale - microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale">
    <link rel="search" type="application/opensearchdescription+xml" href="https://github.com/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    <meta name="twitter:image:src" content="https://avatars2.githubusercontent.com/u/6154722?s=400&amp;v=4"><meta name="twitter:site" content="@github"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale"><meta name="twitter:description" content="Real-time data with Azure Database for PostgreSQL Hyperscale - microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale">
    <meta property="og:image" content="https://avatars2.githubusercontent.com/u/6154722?s=400&amp;v=4"><meta property="og:site_name" content="GitHub"><meta property="og:type" content="object"><meta property="og:title" content="microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale"><meta property="og:url" content="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale"><meta property="og:description" content="Real-time data with Azure Database for PostgreSQL Hyperscale - microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale">

  <link rel="assets" href="https://github.githubassets.com/">
  <link rel="web-socket" href="wss://live.github.com/_sockets/VjI6NDM4NjUzNDIzOjA0OGE0OGM0ZTM3ZjFiNTE4NGFiNTcwYzJmMmRiMzkyN2NjOWQwNmYwMzU0ZjE2ZjQxNDFiYmI4YjQ3ZTNmMWY=--44a01d0eddf1fbdaf9c842f76e57c8547a361f2a">
  <meta name="pjax-timeout" content="1000">
  <link rel="sudo-modal" href="https://github.com/sessions/sudo_modal">
  <meta name="request-id" content="D775:62DF:46F03B:627EC7:5D6936A3" data-pjax-transient="">


  

  <meta name="selected-link" value="repo_source" data-pjax-transient="">

      <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
    <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
    <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">

  <meta name="octolytics-host" content="collector.githubapp.com"><meta name="octolytics-app-id" content="github"><meta name="octolytics-event-url" content="https://collector.githubapp.com/github-external/browser_event"><meta name="octolytics-dimension-request_id" content="D775:62DF:46F03B:627EC7:5D6936A3"><meta name="octolytics-dimension-region_edge" content="ap-south-1"><meta name="octolytics-dimension-region_render" content="iad"><meta name="octolytics-dimension-ga_id" content="973482931.1566370837" class="js-octo-ga-id"><meta name="octolytics-dimension-visitor_id" content="6224811883092569106"><meta name="octolytics-actor-id" content="45102602"><meta name="octolytics-actor-login" content="sumitmalik51"><meta name="octolytics-actor-hash" content="ef0b5a775a3541781b5cb0084ee22c60a97acfe0d83e7869a76bb9dfc594e78e">
<meta name="analytics-location" content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true">



    <meta name="google-analytics" content="UA-3769691-2">

  <meta class="js-ga-set" name="userId" content="65ebbe43b6623d1ad385859876bf140f">

<meta class="js-ga-set" name="dimension1" content="Logged In">



  

      <meta name="hostname" content="github.com">
    <meta name="user-login" content="sumitmalik51">

      <meta name="expected-hostname" content="github.com">
    <meta name="js-proxy-site-detection-payload" content="YWVhYzcwMzgwMjNlMTg0YmU5ZDA3N2EyYWU1YzUyZDBlYjc2ZjNiYmI4ZjdjOWFhOTc5YzMyMzM2MWI4MDc2MHx7InJlbW90ZV9hZGRyZXNzIjoiMTE1Ljk5LjExOC4yMDUiLCJyZXF1ZXN0X2lkIjoiRDc3NTo2MkRGOjQ2RjAzQjo2MjdFQzc6NUQ2OTM2QTMiLCJ0aW1lc3RhbXAiOjE1NjcxNzYzNTUsImhvc3QiOiJnaXRodWIuY29tIn0=">

    <meta name="enabled-features" content="ACTIONS_V2_ON_MARKETPLACE,MARKETPLACE_FEATURED_BLOG_POSTS,MARKETPLACE_INVOICED_BILLING,MARKETPLACE_SOCIAL_PROOF_CUSTOMERS,MARKETPLACE_TRENDING_SOCIAL_PROOF,MARKETPLACE_RECOMMENDATIONS,MARKETPLACE_PENDING_INSTALLATIONS,NOTIFY_ON_BLOCK,RELATED_ISSUES,GHE_CLOUD_TRIAL">

  <meta name="html-safe-nonce" content="0b383e5071503538c935446027d5d6b0752b2df3">

  <meta http-equiv="x-pjax-version" content="9f76737deb7b8a95bbf4c41bb8f7df4e">
  

      <link href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/commits/master.atom" rel="alternate" title="Recent Commits to MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale:master" type="application/atom+xml">

  <meta name="go-import" content="github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale git https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale.git">

  <meta name="octolytics-dimension-user_id" content="6154722"><meta name="octolytics-dimension-user_login" content="microsoft"><meta name="octolytics-dimension-repository_id" content="192589992"><meta name="octolytics-dimension-repository_nwo" content="microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale"><meta name="octolytics-dimension-repository_public" content="true"><meta name="octolytics-dimension-repository_is_fork" content="false"><meta name="octolytics-dimension-repository_network_root_id" content="192589992"><meta name="octolytics-dimension-repository_network_root_nwo" content="microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale"><meta name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" content="false">


    <link rel="canonical" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md" data-pjax-transient="">


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://github.githubassets.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://github.githubassets.com/favicon.ico">

<meta name="theme-color" content="#1e2327">



  <meta name="webauthn-auth-enabled" content="true">

  <meta name="webauthn-registration-enabled" content="true">

  <link rel="manifest" href="https://github.com/manifest.json" crossorigin="use-credentials">

  </head>

  <body class="logged-in env-production page-responsive page-blob intent-mouse">
    

  <div class="position-relative js-header-wrapper ">
    <a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#start-of-content" tabindex="1" class="p-3 bg-blue text-white show-on-focus js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    


          <header class="Header js-details-container Details flex-wrap flex-lg-nowrap p-responsive" role="banner">

    <div class="Header-item d-none d-lg-flex">
      <a class="Header-link" href="https://github.com/" data-hotkey="g d" aria-label="Homepage" data-ga-click="Header, go to dashboard, icon:logo">
  <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
</a>

    </div>

    <div class="Header-item d-lg-none">
      <button class="Header-link btn-link js-details-target" type="button" aria-label="Toggle navigation" aria-expanded="false">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 12 16" version="1.1" width="18" aria-hidden="true"><path fill-rule="evenodd" d="M11.41 9H.59C0 9 0 8.59 0 8c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zm0-4H.59C0 5 0 4.59 0 4c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zM.59 11H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1H.59C0 13 0 12.59 0 12c0-.59 0-1 .59-1z"></path></svg>
      </button>
    </div>

    <div class="Header-item Header-item--full flex-column flex-lg-row width-full flex-order-2 flex-lg-order-none mr-0 mr-lg-3 mt-3 mt-lg-0 Details-content--hidden">
        <div class="header-search flex-self-stretch flex-lg-self-auto mr-0 mr-lg-3 mb-3 mb-lg-0 scoped-search site-scoped-search js-site-search position-relative js-jump-to" role="combobox" aria-owns="jump-to-results" aria-label="Search or jump to" aria-haspopup="listbox" aria-expanded="false">
  <div class="position-relative">
    <!-- '"` --><!-- </textarea></xmp> --><form class="js-site-search-form" role="search" aria-label="Site" data-scope-type="Repository" data-scope-id="192589992" data-scoped-search-url="/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/search" data-unscoped-search-url="/search" action="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="‚úì">
      <label class="form-control input-sm header-search-wrapper p-0 header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center js-chromeless-input-container">
        <input type="text" class="form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable" data-hotkey="s,/" name="q" value="" placeholder="Search or jump to‚Ä¶" data-unscoped-placeholder="Search or jump to‚Ä¶" data-scoped-placeholder="Search or jump to‚Ä¶" autocapitalize="off" aria-autocomplete="list" aria-controls="jump-to-results" aria-label="Search or jump to‚Ä¶" data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations#csrf-token=FR2PY2KYWCT+3x8XMvovV4WAYriXV90nV5SuYpJZ2/4aVcBYhQDwnuhweMokGU6paOGBSLYRAxxyzs/yz6beTw==" spellcheck="false" autocomplete="off">
          <input type="hidden" class="js-site-search-type-field" name="type">
            <img src="https://github.githubassets.com/images/search-key-slash.svg" alt="" class="mr-2 header-search-key-slash">

            <div class="Box position-absolute overflow-hidden d-none jump-to-suggestions js-jump-to-suggestions-container">
              
<ul class="d-none js-jump-to-suggestions-template-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-suggestion" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">‚Üµ</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">‚Üµ</span>
    </div>
  </a>
</li>

</ul>

<ul class="d-none js-jump-to-no-results-template-container">
  <li class="d-flex flex-justify-center flex-items-center f5 d-none js-jump-to-suggestion p-2">
    <span class="text-gray">No suggested jump to results</span>
  </li>
</ul>

<ul id="jump-to-results" role="listbox" class="p-0 m-0 js-navigation-container jump-to-suggestions-results-container js-jump-to-suggestions-results-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-scoped-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">‚Üµ</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">‚Üµ</span>
    </div>
  </a>
</li>

  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-global-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">‚Üµ</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">‚Üµ</span>
    </div>
  </a>
</li>


    <li class="d-flex flex-justify-center flex-items-center p-0 f5 js-jump-to-suggestion">
      <img src="https://github.githubassets.com/images/spinners/octocat-spinner-128.gif" alt="Octocat Spinner Icon" class="m-2" width="28">
    </li>
</ul>

            </div>
      </label>
</form>  </div>
</div>


      <nav class="d-flex flex-column flex-lg-row flex-self-stretch flex-lg-self-auto" aria-label="Global">
    <a class="Header-link d-block d-lg-none py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15" data-ga-click="Header, click, Nav menu - item:dashboard:user" aria-label="Dashboard" href="https://github.com/dashboard">
      Dashboard
</a>
  <a class="js-selected-navigation-item Header-link  mr-0 mr-lg-3 py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15" data-hotkey="g p" data-ga-click="Header, click, Nav menu - item:pulls context:user" aria-label="Pull requests you created" data-selected-links="/pulls /pulls/assigned /pulls/mentioned /pulls" href="https://github.com/pulls">
    Pull requests
</a>
  <a class="js-selected-navigation-item Header-link  mr-0 mr-lg-3 py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15" data-hotkey="g i" data-ga-click="Header, click, Nav menu - item:issues context:user" aria-label="Issues you created" data-selected-links="/issues /issues/assigned /issues/mentioned /issues" href="https://github.com/issues">
    Issues
</a>
    <div class="mr-0 mr-lg-3 py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15">
      <a class="js-selected-navigation-item Header-link" data-ga-click="Header, click, Nav menu - item:marketplace context:user" data-octo-click="marketplace_click" data-octo-dimensions="location:nav_bar" data-selected-links=" /marketplace" href="https://github.com/marketplace">
        Marketplace
</a>      

    </div>

  <a class="js-selected-navigation-item Header-link  mr-0 mr-lg-3 py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore" href="https://github.com/explore">
    Explore
</a>


    <a class="Header-link d-block d-lg-none mr-0 mr-lg-3 py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15" href="https://github.com/sumitmalik51">
      <img class="avatar" height="20" width="20" alt="@sumitmalik51" src="https://avatars1.githubusercontent.com/u/45102602?s=60&amp;v=4">
      sumitmalik51
</a>
    <!-- '"` --><!-- </textarea></xmp> --><form action="https://github.com/logout" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="‚úì"><input type="hidden" name="authenticity_token" value="UUGeKsy4G5lj9JwB2xCrPGQvddmRZXaaf9Oh/yXrFogcBOtteUqTvKdbnB4uUpNTTzFTYHNnfKmv6VS+u0de5w==">
      <button type="submit" class="Header-link mr-0 mr-lg-3 py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15 d-lg-none btn-link d-block width-full text-left" data-ga-click="Header, sign out, icon:logout" style="padding-left: 2px;">
        <svg class="octicon octicon-sign-out v-align-middle" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 9V7H8V5h4V3l4 3-4 3zm-2 3H6V3L2 1h8v3h1V1c0-.55-.45-1-1-1H1C.45 0 0 .45 0 1v11.38c0 .39.22.73.55.91L6 16.01V13h4c.55 0 1-.45 1-1V8h-1v4z"></path></svg>
        Sign out
      </button>
</form></nav>

    </div>

    <div class="Header-item Header-item--full flex-justify-center d-lg-none position-relative">
      <div class="css-truncate css-truncate-target width-fit position-absolute left-0 right-0 text-center">
              <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
    <a class="Header-link" href="https://github.com/microsoft">microsoft</a>
    /
    <a class="Header-link" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale">MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale</a>

</div>
    </div>

    <div class="Header-item position-relative d-none d-lg-flex">
      

    </div>

    <div class="Header-item mr-0 mr-lg-3 flex-order-1 flex-lg-order-none">
      

    <a aria-label="You have no unread notifications" class="Header-link notification-indicator position-relative tooltipped tooltipped-s js-socket-channel js-notification-indicator" data-hotkey="g n" data-ga-click="Header, go to notifications, icon:read" data-channel="notification-changed:45102602" href="https://github.com/notifications">
        <span class="mail-status "></span>
        <svg class="octicon octicon-bell" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 12v1H0v-1l.73-.58c.77-.77.81-2.55 1.19-4.42C2.69 3.23 6 2 6 2c0-.55.45-1 1-1s1 .45 1 1c0 0 3.39 1.23 4.16 5 .38 1.88.42 3.66 1.19 4.42l.66.58H14zm-7 4c1.11 0 2-.89 2-2H5c0 1.11.89 2 2 2z"></path></svg>
</a>
    </div>


    <div class="Header-item position-relative d-none d-lg-flex">
      <details class="details-overlay details-reset">
  <summary class="Header-link" aria-label="Create new‚Ä¶" data-ga-click="Header, create new, icon:add" aria-haspopup="menu">
    <svg class="octicon octicon-plus" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 9H7v5H5V9H0V7h5V2h2v5h5v2z"></path></svg> <span class="dropdown-caret"></span>
  </summary>
  <details-menu class="dropdown-menu dropdown-menu-sw" role="menu">
    
<a role="menuitem" class="dropdown-item" href="https://github.com/new" data-ga-click="Header, create new repository">
  New repository
</a>

  <a role="menuitem" class="dropdown-item" href="https://github.com/new/import" data-ga-click="Header, import a repository">
    Import repository
  </a>

<a role="menuitem" class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, create new gist">
  New gist
</a>

  <a role="menuitem" class="dropdown-item" href="https://github.com/organizations/new" data-ga-click="Header, create new organization">
    New organization
  </a>


  <div role="none" class="dropdown-divider"></div>
  <div class="dropdown-header">
    <span title="microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale">This repository</span>
  </div>
    <a role="menuitem" class="dropdown-item" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/issues/new" data-ga-click="Header, create new issue" data-skip-pjax="">
      New issue
    </a>


  </details-menu>
</details>

    </div>

    <div class="Header-item position-relative mr-0 d-none d-lg-flex">
      
<details class="details-overlay details-reset">
  <summary class="Header-link" aria-label="View profile and more" data-ga-click="Header, show menu, icon:avatar" aria-haspopup="menu">
    <img alt="@sumitmalik51" class="avatar" src="https://avatars2.githubusercontent.com/u/45102602?s=40&amp;v=4" height="20" width="20">
    <span class="dropdown-caret"></span>
  </summary>
  <details-menu class="dropdown-menu dropdown-menu-sw mt-2" style="width: 180px" role="menu">
    <div class="header-nav-current-user css-truncate"><a role="menuitem" class="no-underline user-profile-link px-3 pt-2 pb-2 mb-n2 mt-n1 d-block" href="https://github.com/sumitmalik51" data-ga-click="Header, go to profile, text:Signed in as">Signed in as <strong class="css-truncate-target">sumitmalik51</strong></a></div>
    <div role="none" class="dropdown-divider"></div>

      <div class="pl-3 pr-3 f6 user-status-container js-user-status-context pb-1" data-url="/users/status?compact=1&amp;link_mentions=0&amp;truncate=1">
        
<div class="js-user-status-container
    user-status-compact rounded-1 px-2 py-1 mt-2
    border
  " data-team-hovercards-enabled="">
  <details class="js-user-status-details details-reset details-overlay details-overlay-dark">
    <summary class="btn-link btn-block link-gray no-underline js-toggle-user-status-edit toggle-user-status-edit " role="menuitem" data-hydro-click="{&quot;event_type&quot;:&quot;user_profile.click&quot;,&quot;payload&quot;:{&quot;profile_user_id&quot;:6154722,&quot;target&quot;:&quot;EDIT_USER_STATUS&quot;,&quot;user_id&quot;:45102602,&quot;client_id&quot;:&quot;1449326957.1566370834&quot;,&quot;originating_request_id&quot;:&quot;D775:62DF:46F03B:627EC7:5D6936A3&quot;,&quot;originating_url&quot;:&quot;https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md&quot;,&quot;referrer&quot;:&quot;https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/tree/master/Hands-on%20lab&quot;}}" data-hydro-click-hmac="8bd1a4971c8eb30c9da7d7eb87e1e42de99751303fccfc0d841068d91e87fa9e">
      <div class="d-flex">
        <div class="f6 lh-condensed user-status-header
          d-inline-block v-align-middle
            user-status-emoji-only-header circle
            pr-2
" style="max-width: 29px">
          <div class="user-status-emoji-container flex-shrink-0 mr-1  lh-condensed-ultra v-align-bottom" style="margin-top: 2px;">
            <div><g-emoji class="g-emoji" alias="smiley" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png">üòÉ</g-emoji></div>
          </div>
        </div>
        <div class="
          d-inline-block v-align-middle
          
          
           css-truncate css-truncate-target 
           user-status-message-wrapper f6" style="line-height: 20px;">
          <div class="d-inline-block text-gray-dark v-align-text-top text-left">
              <span class="text-gray">Edit status</span>
          </div>
        </div>
      </div>
    </summary>
    <details-dialog class="details-dialog rounded-1 anim-fade-in fast Box Box--overlay" role="dialog" tabindex="-1" aria-modal="true">
      <!-- '"` --><!-- </textarea></xmp> --><form class="position-relative flex-auto js-user-status-form" action="https://github.com/users/status?compact=1&amp;link_mentions=0&amp;truncate=1" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="‚úì"><input type="hidden" name="_method" value="put"><input type="hidden" name="authenticity_token" value="G7KBWZ6s2BOz2F5GytBLVaGB3JFvseQLow/pJClVi0JjM7e7jjPCfLk5qIHm0EEwDznMg4vZsAWsA+VlegbVig==">
        <div class="Box-header bg-gray border-bottom p-3">
          <button class="Box-btn-octicon js-toggle-user-status-edit btn-octicon float-right" type="reset" aria-label="Close dialog" data-close-dialog="">
            <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
          </button>
          <h3 class="Box-title f5 text-bold text-gray-dark">Edit status</h3>
        </div>
        <input type="hidden" name="emoji" class="js-user-status-emoji-field" value=":smiley:">
        <input type="hidden" name="organization_id" class="js-user-status-org-id-field" value="">
        <div class="px-3 py-2 text-gray-dark">
          <div class="js-characters-remaining-container position-relative mt-2">
            <div class="input-group d-table form-group my-0 js-user-status-form-group">
              <span class="input-group-button d-table-cell v-align-middle" style="width: 1%">
                <button type="button" aria-label="Choose an emoji" class="btn-outline btn js-toggle-user-status-emoji-picker btn-open-emoji-picker p-0">
                  <span class="js-user-status-original-emoji" hidden=""><div><g-emoji class="g-emoji" alias="smiley" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png">üòÉ</g-emoji></div></span>
                  <span class="js-user-status-custom-emoji"><div><g-emoji class="g-emoji" alias="smiley" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png">üòÉ</g-emoji></div></span>
                  <span class="js-user-status-no-emoji-icon" hidden="">
                    <svg class="octicon octicon-smiley" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm4.81 12.81a6.72 6.72 0 0 1-2.17 1.45c-.83.36-1.72.53-2.64.53-.92 0-1.81-.17-2.64-.53-.81-.34-1.55-.83-2.17-1.45a6.773 6.773 0 0 1-1.45-2.17A6.59 6.59 0 0 1 1.21 8c0-.92.17-1.81.53-2.64.34-.81.83-1.55 1.45-2.17.62-.62 1.36-1.11 2.17-1.45A6.59 6.59 0 0 1 8 1.21c.92 0 1.81.17 2.64.53.81.34 1.55.83 2.17 1.45.62.62 1.11 1.36 1.45 2.17.36.83.53 1.72.53 2.64 0 .92-.17 1.81-.53 2.64-.34.81-.83 1.55-1.45 2.17zM4 6.8v-.59c0-.66.53-1.19 1.2-1.19h.59c.66 0 1.19.53 1.19 1.19v.59c0 .67-.53 1.2-1.19 1.2H5.2C4.53 8 4 7.47 4 6.8zm5 0v-.59c0-.66.53-1.19 1.2-1.19h.59c.66 0 1.19.53 1.19 1.19v.59c0 .67-.53 1.2-1.19 1.2h-.59C9.53 8 9 7.47 9 6.8zm4 3.2c-.72 1.88-2.91 3-5 3s-4.28-1.13-5-3c-.14-.39.23-1 .66-1h8.59c.41 0 .89.61.75 1z"></path></svg>
                  </span>
                </button>
              </span>
              <text-expander keys=": @" data-mention-url="/autocomplete/user-suggestions" data-emoji-url="/autocomplete/emoji">
                <input type="text" autocomplete="off" data-no-org-url="/autocomplete/user-suggestions" data-org-url="/suggestions?mention_suggester=1" data-maxlength="80" class="d-table-cell width-full form-control js-user-status-message-field js-characters-remaining-field" placeholder="What&#39;s happening?" name="message" value="" aria-label="What is your current status?">
              </text-expander>
              <div class="error">Could not update your status, please try again.</div>
            </div>
            <div style="margin-left: 53px" class="my-1 text-small label-characters-remaining js-characters-remaining" data-suffix="remaining" hidden="">
              80 remaining
            </div>
          </div>
          <include-fragment class="js-user-status-emoji-picker" data-url="/users/status/emoji"></include-fragment>
          <div class="overflow-auto ml-n3 mr-n3 px-3 border-bottom" style="max-height: 33vh">
            <div class="user-status-suggestions js-user-status-suggestions collapsed overflow-hidden">
              <h4 class="f6 text-normal my-3">Suggestions:</h4>
              <div class="mx-3 mt-2 clearfix">
                  <div class="float-left col-6">
                      <button type="button" value=":palm_tree:" class="d-flex flex-items-baseline flex-items-stretch lh-condensed f6 btn-link link-gray no-underline js-predefined-user-status mb-1">
                        <div class="emoji-status-width mr-2 v-align-middle js-predefined-user-status-emoji">
                          <g-emoji alias="palm_tree" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f334.png">üå¥</g-emoji>
                        </div>
                        <div class="d-flex flex-items-center no-underline js-predefined-user-status-message ws-normal text-left" style="border-left: 1px solid transparent">
                          On vacation
                        </div>
                      </button>
                      <button type="button" value=":face_with_thermometer:" class="d-flex flex-items-baseline flex-items-stretch lh-condensed f6 btn-link link-gray no-underline js-predefined-user-status mb-1">
                        <div class="emoji-status-width mr-2 v-align-middle js-predefined-user-status-emoji">
                          <g-emoji alias="face_with_thermometer" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f912.png">ü§í</g-emoji>
                        </div>
                        <div class="d-flex flex-items-center no-underline js-predefined-user-status-message ws-normal text-left" style="border-left: 1px solid transparent">
                          Out sick
                        </div>
                      </button>
                  </div>
                  <div class="float-left col-6">
                      <button type="button" value=":house:" class="d-flex flex-items-baseline flex-items-stretch lh-condensed f6 btn-link link-gray no-underline js-predefined-user-status mb-1">
                        <div class="emoji-status-width mr-2 v-align-middle js-predefined-user-status-emoji">
                          <g-emoji alias="house" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f3e0.png">üè†</g-emoji>
                        </div>
                        <div class="d-flex flex-items-center no-underline js-predefined-user-status-message ws-normal text-left" style="border-left: 1px solid transparent">
                          Working from home
                        </div>
                      </button>
                      <button type="button" value=":dart:" class="d-flex flex-items-baseline flex-items-stretch lh-condensed f6 btn-link link-gray no-underline js-predefined-user-status mb-1">
                        <div class="emoji-status-width mr-2 v-align-middle js-predefined-user-status-emoji">
                          <g-emoji alias="dart" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f3af.png">üéØ</g-emoji>
                        </div>
                        <div class="d-flex flex-items-center no-underline js-predefined-user-status-message ws-normal text-left" style="border-left: 1px solid transparent">
                          Focusing
                        </div>
                      </button>
                  </div>
              </div>
            </div>
            <div class="user-status-limited-availability-container">
              <div class="form-checkbox my-0">
                <input type="checkbox" name="limited_availability" value="1" class="js-user-status-limited-availability-checkbox" data-default-message="I may be slow to respond." aria-describedby="limited-availability-help-text-truncate-true-compact-true" id="limited-availability-truncate-true-compact-true">
                <label class="d-block f5 text-gray-dark mb-1" for="limited-availability-truncate-true-compact-true">
                  Busy
                </label>
                <p class="note" id="limited-availability-help-text-truncate-true-compact-true">
                  When others mention you, assign you, or request your review,
                  GitHub will let them know that you have limited availability.
                </p>
              </div>
            </div>
          </div>
            

<div class="d-inline-block f5 mr-2 pt-3 pb-2">
  <div class="d-inline-block mr-1">
    Clear status
  </div>

  <details class="js-user-status-expire-drop-down f6 dropdown details-reset details-overlay d-inline-block mr-2">
    <summary class="f5 btn-link link-gray-dark border px-2 py-1 rounded-1" aria-haspopup="true">
      <div class="js-user-status-expiration-interval-selected d-inline-block v-align-baseline">
        Never
      </div>
      <div class="dropdown-caret"></div>
    </summary>

    <ul class="dropdown-menu dropdown-menu-se pl-0 overflow-auto" style="width: 220px; max-height: 15.5em">
      <li>
        <button type="button" class="btn-link dropdown-item js-user-status-expire-button ws-normal" title="Never">
          <span class="d-inline-block text-bold mb-1">Never</span>
          <div class="f6 lh-condensed">Keep this status until you clear your status or edit your status.</div>
        </button>
      </li>
      <li class="dropdown-divider" role="none"></li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="in 30 minutes" value="2019-08-30T20:45:55+05:30">
            in 30 minutes
          </button>
        </li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="in 1 hour" value="2019-08-30T21:15:55+05:30">
            in 1 hour
          </button>
        </li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="in 4 hours" value="2019-08-31T00:15:55+05:30">
            in 4 hours
          </button>
        </li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="today" value="2019-08-30T23:59:59+05:30">
            today
          </button>
        </li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="this week" value="2019-09-01T23:59:59+05:30">
            this week
          </button>
        </li>
    </ul>
  </details>
  <input class="js-user-status-expiration-date-input" type="hidden" name="expires_at" value="">
</div>

          <include-fragment class="js-user-status-org-picker" data-url="/users/status/organizations"></include-fragment>
        </div>
        <div class="d-flex flex-items-center flex-justify-between p-3 border-top">
          <button type="submit" disabled="" class="width-full btn btn-primary mr-2 js-user-status-submit">
            Set status
          </button>
          <button type="button" class="width-full js-clear-user-status-button btn ml-2 js-user-status-exists">
            Clear status
          </button>
        </div>
</form>    </details-dialog>
  </details>
</div>

      </div>
      <div role="none" class="dropdown-divider"></div>


    <a role="menuitem" class="dropdown-item" href="https://github.com/sumitmalik51" data-ga-click="Header, go to profile, text:your profile">Your profile</a>



    <a role="menuitem" class="dropdown-item" href="https://github.com/sumitmalik51?tab=repositories" data-ga-click="Header, go to repositories, text:your repositories">Your repositories</a>

    <a role="menuitem" class="dropdown-item" href="https://github.com/sumitmalik51?tab=projects" data-ga-click="Header, go to projects, text:your projects">Your projects</a>

    <a role="menuitem" class="dropdown-item" href="https://github.com/sumitmalik51?tab=stars" data-ga-click="Header, go to starred repos, text:your stars">Your stars</a>
      <a role="menuitem" class="dropdown-item" href="https://gist.github.com/mine" data-ga-click="Header, your gists, text:your gists">Your gists</a>


    <div role="none" class="dropdown-divider"></div>
    <a role="menuitem" class="dropdown-item" href="https://help.github.com/" data-ga-click="Header, go to help, text:help">Help</a>
    <a role="menuitem" class="dropdown-item" href="https://github.com/settings/profile" data-ga-click="Header, go to settings, icon:settings">Settings</a>
    <!-- '"` --><!-- </textarea></xmp> --><form class="logout-form" action="https://github.com/logout" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="‚úì"><input type="hidden" name="authenticity_token" value="R3bUOfZTcveQmpNBMF++hfrlOxKxuFHqgrB9NPp5710KM6F+Q6H60lQ1k17FHYbq0fsdq1O6W9lSioh1ZNWnMg==">
      
      <button type="submit" class="dropdown-item dropdown-signout" data-ga-click="Header, sign out, icon:logout" role="menuitem">
        Sign out
      </button>
</form>  </details-menu>
</details>

    </div>

  </header>

      

  </div>

  <div id="start-of-content" class="show-on-focus"></div>


    <div id="js-flash-container">

</div>



  <div class="application-main " data-commit-hovercards-enabled="">
        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode" class="">
    <main>
      


  

      <div class="border-bottom shelf intro-shelf js-notice mb-0 pb-4">
  <div class="width-full container">
    <div class="width-full mx-auto shelf-content">
      <h2 class="shelf-title">Learn Git and GitHub without any code!</h2>
      <p class="shelf-lead">
          Using the Hello World guide, you‚Äôll start a branch, write comments, and open a pull request.
      </p>
      <a class="btn btn-primary shelf-cta" target="_blank" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;READ_GUIDE&quot;,&quot;repository_id&quot;:192589992,&quot;client_id&quot;:&quot;1449326957.1566370834&quot;,&quot;originating_request_id&quot;:&quot;D775:62DF:46F03B:627EC7:5D6936A3&quot;,&quot;originating_url&quot;:&quot;https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md&quot;,&quot;referrer&quot;:&quot;https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/tree/master/Hands-on%20lab&quot;,&quot;user_id&quot;:45102602}}" data-hydro-click-hmac="002f05fd77f116a69b3768077b2eda24566e02eac6caa13799066b99f905cc26" href="https://guides.github.com/activities/hello-world/">Read the guide</a>
    </div>
    <!-- '"` --><!-- </textarea></xmp> --><form class="shelf-dismiss js-notice-dismiss" action="https://github.com/dashboard/dismiss_bootcamp" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="‚úì"><input type="hidden" name="_method" value="delete"><input type="hidden" name="authenticity_token" value="8fcGTok11wekkeD9P7kOzmUBJEHEFzKXr9tcdwcDb752FAjo2BCPv0HP2iGTtsPy8lydEBnatsZBP3IHsmo8Bg==">
      <button name="button" type="submit" class="mr-1 close-button tooltipped tooltipped-w" aria-label="Hide this notice forever" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;DISMISS_BANNER&quot;,&quot;repository_id&quot;:192589992,&quot;client_id&quot;:&quot;1449326957.1566370834&quot;,&quot;originating_request_id&quot;:&quot;D775:62DF:46F03B:627EC7:5D6936A3&quot;,&quot;originating_url&quot;:&quot;https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md&quot;,&quot;referrer&quot;:&quot;https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/tree/master/Hands-on%20lab&quot;,&quot;user_id&quot;:45102602}}" data-hydro-click-hmac="b77440ad5528f0c0db8677f63dfac46c0caa63820d0aa0ab8b45f43692d01375">
        <svg aria-label="Hide this notice forever" class="octicon octicon-x v-align-text-top" viewBox="0 0 12 16" version="1.1" width="12" height="16" role="img"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
</button></form>  </div>
</div>



  








  <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav pt-0 pt-lg-4 ">
    <div class="repohead-details-container clearfix container-lg p-responsive d-none d-lg-block">

      <ul class="pagehead-actions">




  <li>
    
    <!-- '"` --><!-- </textarea></xmp> --><form data-remote="true" class="clearfix js-social-form js-social-container" action="https://github.com/notifications/subscribe" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="‚úì"><input type="hidden" name="authenticity_token" value="Hm0oYghUusZP4VoSIXZKp0vcYAgA+M//YBFU+Dof2WidLkeSwv2viZLtmX9lLb31gzw7F6OFQfnvtYT5st6EcQ==">      <input type="hidden" name="repository_id" value="192589992">

      <details class="details-reset details-overlay select-menu float-left">
        <summary class="select-menu-button float-left btn btn-sm btn-with-count" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;WATCH_BUTTON&quot;,&quot;repository_id&quot;:192589992,&quot;client_id&quot;:&quot;1449326957.1566370834&quot;,&quot;originating_request_id&quot;:&quot;D775:62DF:46F03B:627EC7:5D6936A3&quot;,&quot;originating_url&quot;:&quot;https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md&quot;,&quot;referrer&quot;:&quot;https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/tree/master/Hands-on%20lab&quot;,&quot;user_id&quot;:45102602}}" data-hydro-click-hmac="5e9c4a0274c26d0a3a77d9ad37445cfb7a402544aae953f4618b4d035c5aba9d" data-ga-click="Repository, click Watch settings, action:blob#show" aria-haspopup="menu">          <span data-menu-button="">
              <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
              Watch
          </span>
</summary>        <details-menu class="select-menu-modal position-absolute mt-5" style="z-index: 99;" role="menu">
          <div class="select-menu-header">
            <span class="select-menu-title">Notifications</span>
          </div>
          <div class="select-menu-list">
            <button type="submit" name="do" value="included" class="select-menu-item width-full" aria-checked="true" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Not watching</span>
                <span class="description">Be notified only when participating or @mentioned.</span>
                <span class="hidden-select-button-text" data-menu-button-contents="">
                  <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                  Watch
                </span>
              </div>
            </button>

            <button type="submit" name="do" value="release_only" class="select-menu-item width-full" aria-checked="false" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Releases only</span>
                <span class="description">Be notified of new releases, and when participating or @mentioned.</span>
                <span class="hidden-select-button-text" data-menu-button-contents="">
                  <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                  Unwatch releases
                </span>
              </div>
            </button>

            <button type="submit" name="do" value="subscribed" class="select-menu-item width-full" aria-checked="false" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Watching</span>
                <span class="description">Be notified of all conversations.</span>
                <span class="hidden-select-button-text" data-menu-button-contents="">
                  <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                  Unwatch
                </span>
              </div>
            </button>

            <button type="submit" name="do" value="ignore" class="select-menu-item width-full" aria-checked="false" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Ignoring</span>
                <span class="description">Never be notified.</span>
                <span class="hidden-select-button-text" data-menu-button-contents="">
                  <svg class="octicon octicon-mute v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.81v10.38c0 .67-.81 1-1.28.53L3 10H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h2l3.72-3.72C7.19 1.81 8 2.14 8 2.81zm7.53 3.22l-1.06-1.06-1.97 1.97-1.97-1.97-1.06 1.06L11.44 8 9.47 9.97l1.06 1.06 1.97-1.97 1.97 1.97 1.06-1.06L13.56 8l1.97-1.97z"></path></svg>
                  Stop ignoring
                </span>
              </div>
            </button>
          </div>
        </details-menu>
      </details>
        <a class="social-count js-social-count" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/watchers" aria-label="2 users are watching this repository">
          2
        </a>
</form>
  </li>

  <li>
      <div class="js-toggler-container js-social-container starring-container ">
    <!-- '"` --><!-- </textarea></xmp> --><form class="starred js-social-form" action="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/unstar" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="‚úì"><input type="hidden" name="authenticity_token" value="RKQgqVL85kNR5RNenRwOWB1gFcrA5JaGGvvZxZlYVQFum4K7AYZuQZXOqmxT6JRGzmolGzJBU/SroEN67Kl7VA==">
      <input type="hidden" name="context" value="repository">
      <button type="submit" class="btn btn-sm btn-with-count js-toggler-target" aria-label="Unstar this repository" title="Unstar microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;UNSTAR_BUTTON&quot;,&quot;repository_id&quot;:192589992,&quot;client_id&quot;:&quot;1449326957.1566370834&quot;,&quot;originating_request_id&quot;:&quot;D775:62DF:46F03B:627EC7:5D6936A3&quot;,&quot;originating_url&quot;:&quot;https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md&quot;,&quot;referrer&quot;:&quot;https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/tree/master/Hands-on%20lab&quot;,&quot;user_id&quot;:45102602}}" data-hydro-click-hmac="a90964be9b9f880293073a620ed5ddb62682be59dbf2b0a1472fdac5b68cc4e8" data-ga-click="Repository, click unstar button, action:blob#show; text:Unstar">        <svg class="octicon octicon-star v-align-text-bottom" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"></path></svg>
        Unstar
</button>        <a class="social-count js-social-count" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/stargazers" aria-label="2 users starred this repository">
           2
        </a>
</form>
    <!-- '"` --><!-- </textarea></xmp> --><form class="unstarred js-social-form" action="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/star" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="‚úì"><input type="hidden" name="authenticity_token" value="XDIjUzuknE2cbkeDIzDDzrZYw5JI9Y5qkXj9GkS3gt2CZ/r0K3tG2+3Ps1RqpVTFx2h5R7JxRqck2eBCSWzsRA==">
      <input type="hidden" name="context" value="repository">
      <button type="submit" class="btn btn-sm btn-with-count js-toggler-target" aria-label="Unstar this repository" title="Star microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;STAR_BUTTON&quot;,&quot;repository_id&quot;:192589992,&quot;client_id&quot;:&quot;1449326957.1566370834&quot;,&quot;originating_request_id&quot;:&quot;D775:62DF:46F03B:627EC7:5D6936A3&quot;,&quot;originating_url&quot;:&quot;https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md&quot;,&quot;referrer&quot;:&quot;https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/tree/master/Hands-on%20lab&quot;,&quot;user_id&quot;:45102602}}" data-hydro-click-hmac="6e020f5b3ef010eb695c92d82439f17a7ce7ca81c853bf8a9a980cca2185df08" data-ga-click="Repository, click star button, action:blob#show; text:Star">        <svg class="octicon octicon-star v-align-text-bottom" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"></path></svg>
        Star
</button>        <a class="social-count js-social-count" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/stargazers" aria-label="2 users starred this repository">
          2
        </a>
</form>  </div>

  </li>

  <li>
          <!-- '"` --><!-- </textarea></xmp> --><form class="btn-with-count" action="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/fork" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="‚úì"><input type="hidden" name="authenticity_token" value="gNYqex8+CUedCPAXnmP/424yiE0+rJhLKP4ews8K/ZcylkNFWcy2o9b09pTVyDKrcWVBVHTFa3ltOshTUiqAAA==">
            <button class="btn btn-sm btn-with-count" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;FORK_BUTTON&quot;,&quot;repository_id&quot;:192589992,&quot;client_id&quot;:&quot;1449326957.1566370834&quot;,&quot;originating_request_id&quot;:&quot;D775:62DF:46F03B:627EC7:5D6936A3&quot;,&quot;originating_url&quot;:&quot;https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md&quot;,&quot;referrer&quot;:&quot;https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/tree/master/Hands-on%20lab&quot;,&quot;user_id&quot;:45102602}}" data-hydro-click-hmac="08cf7a6e1a8ced0b17e2cd20da008eb63fa1f46124669ff3e008e1ce801eca78" data-ga-click="Repository, show fork modal, action:blob#show; text:Fork" type="submit" title="Fork your own copy of microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale to your account" aria-label="Fork your own copy of microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale to your account">              <svg class="octicon octicon-repo-forked v-align-text-bottom" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
              Fork
</button></form>
    <a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/network/members" class="social-count" aria-label="2 users forked this repository">
      2
    </a>
  </li>
</ul>

      <h1 class="public ">
    <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
  <span class="author" itemprop="author"><a class="url fn" rel="author" data-hovercard-type="organization" data-hovercard-url="/orgs/microsoft/hovercard" href="https://github.com/microsoft">microsoft</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a data-pjax="#js-repo-pjax-container" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale">MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale</a></strong>
  

</h1>

    </div>
    
<nav class="hx_reponav reponav js-repo-nav js-sidenav-container-pjax container-lg p-responsive d-none d-lg-block" itemscope="" itemtype="http://schema.org/BreadcrumbList" aria-label="Repository" data-pjax="#js-repo-pjax-container">

  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a class="js-selected-navigation-item selected reponav-item" itemprop="url" data-hotkey="g c" aria-current="page" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale">
      <svg class="octicon octicon-code" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"></path></svg>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" data-hotkey="g i" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/issues" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/issues">
        <svg class="octicon octicon-issue-opened" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
        <span itemprop="name">Issues</span>
        <span class="Counter">0</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a data-hotkey="g p" itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/pulls" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/pulls">
      <svg class="octicon octicon-git-pull-request" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">0</span>
      <meta itemprop="position" content="3">
</a>  </span>

    <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement" class="position-relative float-left">
      <a data-hotkey="g w" data-skip-pjax="true" class="js-selected-navigation-item reponav-item" data-selected-links="repo_actions /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/actions" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/actions">
        <svg class="octicon octicon-play" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 8A7 7 0 1 1 0 8a7 7 0 0 1 14 0zm-8.223 3.482l4.599-3.066a.5.5 0 0 0 0-.832L5.777 4.518A.5.5 0 0 0 5 4.934v6.132a.5.5 0 0 0 .777.416z"></path></svg>
        Actions
</a>
    </span>

    <a data-hotkey="g b" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/projects" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/projects">
      <svg class="octicon octicon-project" viewBox="0 0 15 16" version="1.1" width="15" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"></path></svg>
      Projects
      <span class="Counter">0</span>
</a>

    <a class="js-selected-navigation-item reponav-item" data-hotkey="g w" data-selected-links="repo_wiki /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/wiki" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/wiki">
      <svg class="octicon octicon-book" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z"></path></svg>
      Wiki
</a>
    <a data-skip-pjax="true" class="js-selected-navigation-item reponav-item" data-selected-links="security alerts policy /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/security/advisories" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/security/advisories">
      <svg class="octicon octicon-shield" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 2l7-2 7 2v6.02C14 12.69 8.69 16 7 16c-1.69 0-7-3.31-7-7.98V2zm1 .75L7 1l6 1.75v5.268C13 12.104 8.449 15 7 15c-1.449 0-6-2.896-6-6.982V2.75zm1 .75L7 2v12c-1.207 0-5-2.482-5-5.985V3.5z"></path></svg>
      Security
</a>
    <a class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors dependency_graph pulse people /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/pulse" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/pulse">
      <svg class="octicon octicon-graph" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"></path></svg>
      Insights
</a>

</nav>

  <div class="reponav-wrapper reponav-small d-lg-none">
  <nav class="reponav js-reponav text-center no-wrap" itemscope="" itemtype="http://schema.org/BreadcrumbList">

    <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a class="js-selected-navigation-item selected reponav-item" itemprop="url" aria-current="page" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale">
        <span itemprop="name">Code</span>
        <meta itemprop="position" content="1">
</a>    </span>

      <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/issues" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/issues">
          <span itemprop="name">Issues</span>
          <span class="Counter">0</span>
          <meta itemprop="position" content="2">
</a>      </span>

    <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/pulls" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/pulls">
        <span itemprop="name">Pull requests</span>
        <span class="Counter">0</span>
        <meta itemprop="position" content="3">
</a>    </span>

      <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/projects" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/projects">
          <span itemprop="name">Projects</span>
          <span class="Counter">0</span>
          <meta itemprop="position" content="4">
</a>      </span>

      <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_wiki /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/wiki" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/wiki">
          <span itemprop="name">Wiki</span>
          <meta itemprop="position" content="5">
</a>      </span>

      <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="security alerts policy /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/security/advisories" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/security/advisories">
        <span itemprop="name">Security</span>
        <meta itemprop="position" content="6">
</a>
      <a class="js-selected-navigation-item reponav-item" data-selected-links="pulse /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/pulse" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/pulse">
        Pulse
</a>
      <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="community /microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/community" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/community">
          Community
</a>      </span>

  </nav>
</div>


  </div>
<div class="container-lg clearfix new-discussion-timeline experiment-repo-nav  p-responsive">
  <div class="repository-content ">

    
    


  


    <a class="d-none js-permalink-shortcut" data-hotkey="y" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/5c7d32ae7c94f6283ec79f093038c4d26d5eb318/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md">Permalink</a>

    <!-- blob contrib key: blob_contributors:v21:bcedcbf41b40e81a5e6ecfca4e5eaabc -->
      

    <div class="d-flex flex-items-start flex-shrink-0 pb-3 flex-column flex-md-row">
      <span class="d-flex flex-justify-between width-full width-md-auto">
        
<details class="details-reset details-overlay select-menu branch-select-menu  hx_rsm" id="branch-select-menu">
  <summary class="btn btn-sm select-menu-button css-truncate" data-hotkey="w" title="Switch branches or tags" aria-haspopup="menu">
    <i>Branch:</i>
    <span class="css-truncate-target" data-menu-button="">master</span>
  </summary>

  <details-menu class="select-menu-modal hx_rsm-modal position-absolute" style="z-index: 99;" src="/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/ref-list/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md?source_action=show&amp;source_controller=blob" preload="" role="menu">
    <include-fragment class="select-menu-loading-overlay anim-pulse">
      <svg height="32" class="octicon octicon-octoface" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M14.7 5.34c.13-.32.55-1.59-.13-3.31 0 0-1.05-.33-3.44 1.3-1-.28-2.07-.32-3.13-.32s-2.13.04-3.13.32c-2.39-1.64-3.44-1.3-3.44-1.3-.68 1.72-.26 2.99-.13 3.31C.49 6.21 0 7.33 0 8.69 0 13.84 3.33 15 7.98 15S16 13.84 16 8.69c0-1.36-.49-2.48-1.3-3.35zM8 14.02c-3.3 0-5.98-.15-5.98-3.35 0-.76.38-1.48 1.02-2.07 1.07-.98 2.9-.46 4.96-.46 2.07 0 3.88-.52 4.96.46.65.59 1.02 1.3 1.02 2.07 0 3.19-2.68 3.35-5.98 3.35zM5.49 9.01c-.66 0-1.2.8-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.54-1.78-1.2-1.78zm5.02 0c-.66 0-1.2.79-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.53-1.78-1.2-1.78z"></path></svg>
    </include-fragment>
  </details-menu>
</details>

        <div class="BtnGroup flex-shrink-0 d-md-none">
          <a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/find/master" class="js-pjax-capture-input btn btn-sm BtnGroup-item" data-pjax="" data-hotkey="t">
            Find file
          </a>
          <clipboard-copy value="Hands-on lab/HOL step-by step - Real-time data with Azure Database for PostgreSQL Hyperscale.md" class="btn btn-sm BtnGroup-item" tabindex="0" role="button">
            Copy path
          </clipboard-copy>
        </div>
      </span>
      <h2 id="blob-path" class="breadcrumb flex-auto min-width-0 text-normal flex-md-self-center ml-md-2 mr-md-3 my-2 my-md-0">
        <span class="js-repo-root text-bold"><span class="js-path-segment"><a data-pjax="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale"><span>MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale</span></a></span></span><span class="separator">/</span><span class="js-path-segment"><a data-pjax="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/tree/master/Hands-on%20lab"><span>Hands-on lab</span></a></span><span class="separator">/</span><strong class="final-path">HOL step-by step - Real-time data with Azure Database for PostgreSQL Hyperscale.md</strong>
      </h2>

      <div class="BtnGroup flex-shrink-0 d-none d-md-inline-block">
        <a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/find/master" class="js-pjax-capture-input btn btn-sm BtnGroup-item" data-pjax="" data-hotkey="t">
          Find file
        </a>
        <clipboard-copy value="Hands-on lab/HOL step-by step - Real-time data with Azure Database for PostgreSQL Hyperscale.md" class="btn btn-sm BtnGroup-item" tabindex="0" role="button">
          Copy path
        </clipboard-copy>
      </div>
    </div>



    
  <div class="Box Box--condensed d-flex flex-column flex-shrink-0">
      <div class="Box-body d-flex flex-justify-between bg-blue-light flex-column flex-md-row flex-items-start flex-md-items-center">
        <span class="pr-md-4 f6">
          <a rel="contributor" data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/hovercards?user_id=39317565" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/DawnmarieDesJardins"><img class="avatar" src="https://avatars3.githubusercontent.com/u/39317565?s=40&amp;v=4" width="20" height="20" alt="@DawnmarieDesJardins"></a>
          <a class="text-bold link-gray-dark lh-default v-align-middle" rel="contributor" data-hovercard-type="user" data-hovercard-url="/hovercards?user_id=39317565" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/DawnmarieDesJardins">DawnmarieDesJardins</a>
            <span class="lh-default v-align-middle">
              <a data-pjax="true" title="Update and rename HOL step-by step - Visualizing real-time data with Azure Database for PostgreSQL Hyperscale.md to HOL step-by step - Real-time data with Azure Database for PostgreSQL Hyperscale.md

Corrected WS title." class="link-gray" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/commit/d92c875aa60c7f545ea6ded9c02fdbe0ecd52897">Update and rename HOL step-by step - Visualizing real-time data with ‚Ä¶</a>
            </span>
        </span>
        <span class="d-inline-block flex-shrink-0 v-align-bottom f6 mt-2 mt-md-0">
          <a class="pr-2 text-mono link-gray" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/commit/d92c875aa60c7f545ea6ded9c02fdbe0ecd52897" data-pjax="">d92c875</a>
          <relative-time datetime="2019-07-10T22:40:22Z" title="Jul 11, 2019, 4:10 AM GMT+5:30">on Jul 11</relative-time>
        </span>
      </div>

    <div class="Box-body d-flex flex-items-center flex-auto f6 border-bottom-0 flex-wrap">
      <details class="details-reset details-overlay details-overlay-dark lh-default text-gray-dark float-left mr-2" id="blob_contributors_box">
        <summary class="btn-link" role="button">
          <span><strong>1</strong> contributor</span>
        </summary>
        <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast" aria-label="Users who have contributed to this file" src="/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/contributors/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md/list" preload="" role="dialog" aria-modal="true">
          <div class="Box-header">
            <button class="Box-btn-octicon btn-octicon float-right" type="button" aria-label="Close dialog" data-close-dialog="">
              <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
            </button>
            <h3 class="Box-title">
              Users who have contributed to this file
            </h3>
          </div>
          <include-fragment class="octocat-spinner my-3" aria-label="Loading..."></include-fragment>
        </details-dialog>
      </details>
    </div>
  </div>





    <div class="Box mt-3 position-relative">
      
<div class="Box-header py-2 d-flex flex-column flex-shrink-0 flex-md-row flex-md-items-center">

  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
      982 lines (628 sloc)
      <span class="file-info-divider"></span>
    69.8 KB
  </div>

  <div class="d-flex py-1 py-md-0 flex-auto flex-order-1 flex-md-order-2 flex-sm-grow-0 flex-justify-between">

    <div class="BtnGroup">
      <a id="raw-url" class="btn btn-sm BtnGroup-item" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md">Raw</a>
        <a class="btn btn-sm js-update-url-with-hash BtnGroup-item" data-hotkey="b" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blame/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md">Blame</a>
      <a rel="nofollow" class="btn btn-sm BtnGroup-item" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/commits/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md">History</a>
    </div>


    <div>
            <a class="btn-octicon tooltipped tooltipped-nw hide-sm" href="x-github-client://openRepo/https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale?branch=master&amp;filepath=Hands-on%20lab%2FHOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md" aria-label="Open this file in GitHub Desktop" data-ga-click="Repository, open with desktop, type:windows">
                <svg class="octicon octicon-device-desktop" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M15 2H1c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h5.34c-.25.61-.86 1.39-2.34 2h8c-1.48-.61-2.09-1.39-2.34-2H15c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm0 9H1V3h14v8z"></path></svg>
            </a>

            <!-- '"` --><!-- </textarea></xmp> --><form class="inline-form js-update-url-with-hash" action="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/edit/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="‚úì"><input type="hidden" name="authenticity_token" value="/UQwa0mG6jiLPZ4+QZpar9FFw3BLDFD4DMUV6MnAa+TBY95CNmXwyOPnCGzxEHkpbs69sIaP96YCuM9J0iI1jA==">
              <button class="btn-octicon tooltipped tooltipped-nw" type="submit" aria-label="Fork this project and edit the file" data-hotkey="e" data-disable-with="">
                <svg class="octicon octicon-pencil" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"></path></svg>
              </button>
</form>
          <!-- '"` --><!-- </textarea></xmp> --><form class="inline-form" action="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/delete/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="‚úì"><input type="hidden" name="authenticity_token" value="Ah7LDd29ry7doA5Hku3DI1Ysmlvc5tNDQE+/s2sa9xLWlrnjtWyYcFVQ5b2N3yVbnV+6IME2kX1KFRciHKw+oA==">
            <button class="btn-octicon btn-octicon-danger tooltipped tooltipped-nw" type="submit" aria-label="Fork this project and delete the file" data-disable-with="">
              <svg class="octicon octicon-trashcan" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 2H9c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1H2c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1v9c0 .55.45 1 1 1h7c.55 0 1-.45 1-1V5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 12H3V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9zm1-10H2V3h9v1z"></path></svg>
            </button>
</form>    </div>
  </div>
</div>




      
  <div id="readme" class="Box-body readme blob instapaper_body js-code-block-container">
    <article class="markdown-body entry-content p-3 p-md-6" itemprop="text"><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/Microsoft/MCW-Template-Cloud-Workshop/raw/master/Media/ms-cloud-workshop.png"><img src="https://github.com/Microsoft/MCW-Template-Cloud-Workshop/raw/master/Media/ms-cloud-workshop.png" alt="Microsoft Cloud Workshops" title="Microsoft Cloud Workshops" style="max-width:100%;"></a></p>
<div>
Real-time data with Azure Database for PostgreSQL Hyperscale
</div>
<div>
Hands-on lab step-by-step
</div>
<div>
June 2019
</div>
<p>Information in this document, including URL and other Internet Web site references, is subject to change without notice. Unless otherwise noted, the example companies, organizations, products, domain names, e-mail addresses, logos, people, places, and events depicted herein are fictitious, and no association with any real company, organization, product, domain name, e-mail address, logo, person, place or event is intended or should be inferred. Complying with all applicable copyright laws is the responsibility of the user. Without limiting the rights under copyright, no part of this document may be reproduced, stored in or introduced into a retrieval system, or transmitted in any form or by any means (electronic, mechanical, photocopying, recording, or otherwise), or for any purpose, without the express written permission of Microsoft Corporation.</p>
<p>Microsoft may have patents, patent applications, trademarks, copyrights, or other intellectual property rights covering subject matter in this document. Except as expressly provided in any written license agreement from Microsoft, the furnishing of this document does not give you any license to these patents, trademarks, copyrights, or other intellectual property.</p>
<p>The names of manufacturers, products, or URLs are provided for informational purposes only and Microsoft makes no representations and warranties, either expressed, implied, or statutory, regarding these manufacturers or the use of the products with any Microsoft technologies. The inclusion of a manufacturer or product does not imply endorsement of Microsoft of the manufacturer or product. Links may be provided to third party sites. Such sites are not under the control of Microsoft and Microsoft is not responsible for the contents of any linked site or any link contained in a linked site, or any changes or updates to such sites. Microsoft is not responsible for webcasting or any other form of transmission received from any linked site. Microsoft is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement of Microsoft of the site or the products contained therein.</p>
<p>¬© 2019 Microsoft Corporation. All rights reserved.</p>
<p>Microsoft and the trademarks listed at <a href="https://www.microsoft.com/en-us/legal/intellectualproperty/Trademarks/Usage/General.aspx" rel="nofollow">https://www.microsoft.com/en-us/legal/intellectualproperty/Trademarks/Usage/General.aspx</a> are trademarks of the Microsoft group of companies. All other trademarks are property of their respective owners.</p>
<p><strong>Contents</strong></p>

<ul>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale-hands-on-lab-step-by-step">Real-time data with Azure Database for PostgreSQL Hyperscale hands-on lab step-by-step</a>
<ul>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Abstract-and-learning-objectives">Abstract and learning objectives</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Overview">Overview</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Solution-architecture">Solution architecture</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Requirements">Requirements</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Before-the-hands-on-lab">Before the hands-on lab</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Exercise-1-Connect-to-and-set-up-your-database">Exercise 1: Connect to and set up your database</a>
<ul>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-1-Connect-to-the-PostgreSQL-database">Task 1: Connect to the PostgreSQL database</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-2-Create-a-table-to-store-clickstream-data">Task 2: Create a table to store clickstream data</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-3-Shard-tables-across-nodes">Task 3: Shard tables across nodes</a></li>
</ul>
</li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Exercise-2-Add-secrets-to-Key-Vault-and-configure-Azure-Databricks">Exercise 2: Add secrets to Key Vault and configure Azure Databricks</a>
<ul>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-1-Obtain-and-store-ADLS-Gen2-secrets-in-Azure-Key-Vault">Task 1: Obtain and store ADLS Gen2 secrets in Azure Key Vault</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-2-Obtain-and-store-Event-Hubs-Kafka-secrets-in-Azure-Key-Vault">Task 2: Obtain and store Event Hubs (Kafka) secrets in Azure Key Vault</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-3-Create-a-service-principal-for-OAuth-access-to-the-ADLS-Gen2-filesystem">Task 3: Create a service principal for OAuth access to the ADLS Gen2 filesystem</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-4-Add-the-service-principal-credentials-and-Tenant-Id-to-Azure-Key-Vault">Task 4: Add the service principal credentials and Tenant Id to Azure Key Vault</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-5-Create-an-Azure-Databricks-cluster">Task 5: Create an Azure Databricks cluster</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-6-Load-lab-notebooks-into-Azure-Databricks">Task 6: Load lab notebooks into Azure Databricks</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-7-Configure-Azure-Databricks-Key-Vault-backed-secrets">Task 7: Configure Azure Databricks Key Vault-backed secrets</a></li>
</ul>
</li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Exercise-3-Send-clickstream-data-to-Kafka-and-process-it-in-real-time">Exercise 3: Send clickstream data to Kafka and process it in real time</a>
<ul>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-1-Configure-the-KafkaProducer-application">Task 1: Configure the KafkaProducer application</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-2-Open-notebook-and-process-the-streaming-data">Task 2: Open notebook and process the streaming data</a></li>
</ul>
</li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Exercise-4-Rollup-real-time-data-in-PostgreSQL">Exercise 4: Rollup real-time data in PostgreSQL</a>
<ul>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-1-Create-functions-to-rollup-data">Task 1: Create functions to rollup data</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-2-Schedule-periodic-aggregation-and-execute-dashboard-queries">Task 2: Schedule periodic aggregation and execute dashboard queries</a></li>
</ul>
</li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Exercise-5-Create-advanced-visualizations-in-Power-BI">Exercise 5: Create advanced visualizations in Power BI</a>
<ul>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-1-Connect-to-your-Postgres-data-from-Power-BI">Task 1: Connect to your Postgres data from Power BI</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-2-Create-report">Task 2: Create report</a></li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-3-Save-and-publish-report">Task 3: Save and publish report</a></li>
</ul>
</li>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#After-the-hands-on-lab">After the hands-on lab</a>
<ul>
<li><a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#Task-1-Delete-the-resource-group">Task 1: Delete the resource group</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<h1><a id="user-content-real-time-data-with-azure-database-for-postgresql-hyperscale-hands-on-lab-step-by-step" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#real-time-data-with-azure-database-for-postgresql-hyperscale-hands-on-lab-step-by-step"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Real-time data with Azure Database for PostgreSQL Hyperscale hands-on lab step-by-step</h1>
<h2><a id="user-content-abstract-and-learning-objectives" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#abstract-and-learning-objectives"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Abstract and learning objectives</h2>
<p>In this hands-on lab, you will implement a proof-of-concept (PoC) for using advanced features of the managed PostgreSQL PaaS service on Azure. These features help make your database more scalable and able to handle the rapid ingest of streaming data while simultaneously generating and serving pre-aggregated data for reports. You will create a resilient stream processing pipeline to ingest, process, and save real-time data to Postgres. Then, you will create complex reports containing advanced visualizations, using a drag-and-drop interface, and use them to build a customizable dashboard that be easily shared with others.</p>
<p>At the end of this hands-on-lab, you will be better able to implement a highly scalable, managed open source database solution that can simultaneously handle real-time data and roll-up and serve data for advanced visualizations.</p>
<h2><a id="user-content-overview" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#overview"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<p>Wide World Importers (WWI) is a traditional brick and mortar business with a long track record of success, generating profits through strong retail store sales of their unique offering of affordable products from around the world. They have a great training program for new employees, that focuses on connecting with their customers and providing great face-to-face customer service. This strong focus on customer relationships has helped set WWI apart from their competitors.</p>
<p>Over time, WWI modernized their business by expanding to online storefronts. During this expansion period, WWI experimented with various marketing tactics to drive online sales, from offering in-store shoppers special discounts online with promotional coupons after making a purchase, to running ad campaigns targeted toward customers based on demographics and shopping habits. These marketing campaigns proved successful, prompting WWI to invest more resources to these efforts and grow their marketing team.</p>
<p>Today, WWI has a host of online stores for various product offerings, from their traditional product catalogs offered by their physical storefronts, to specialized categories like automotive and consumer technology products. This expansion has made it more challenging to analyze user clickstream data, online ad performance, and other marketing campaigns at scale, and to provide insights to the marketing team in real-time.</p>
<p>Real-time marketing analysis is provided through interactive reports and dashboards on WWI's home-grown web platform, ReMarketable. This platform has served them well, but they are currently hindered by their inability to keep up with demand. ReMarketable's primary users are members of the marketing team, and the secondary users are shoppers on their various online platforms for whom website interaction behavior is being tracked. Other sources of data are fed from online ad data generated by ads run on social media platforms and email marketing campaigns. They use this type of data to evaluate ad effectiveness and customer reach, ultimately leading to sales conversions.</p>
<p>Their current challenges with ReMarketable are:</p>
<ol>
<li>
<p><strong>Scale</strong> - WWI is using a PostgreSQL database to store ReMarketable's data. Historical data is growing by over 2.9 GB rows of data per month. It is taking consistently longer to run complex queries. Queries that used to run in 3-5 seconds now take several minutes to complete. This is impacting their users' ability to evaluate up-to-date marketing and website use statistics. Instead of providing real-time reports for all users, they have to keep delaying report runs. They have scaled up their database, but this is becoming very expensive and they will soon hit a ceiling.</p>
</li>
<li>
<p><strong>Multi-tenancy</strong> - The nature of their marketing and site usage data would benefit from multi-tenancy. Some storefronts generate considerably more data than others and have more marketing analysts that run reports on them than others. WWI believes sharding their database would help take the pressure off lower-volume data stores and also help them scale out. However, this will require re-engineering their database schema and client applications. In addition, sharding will require additional maintenance and increased complexity of aggregated views. These additional challenges and required resources are why they have not pursued this option yet.</p>
</li>
<li>
<p><strong>Process data while generating roll-ups</strong> - Another byproduct of outgrowing their database is that WWI is having difficulty efficiently processing and ingesting streaming data, while at the same time generating reports for their dashboards. PostgreSQL is well-suited to handle multiple workloads simultaneously when the databases are properly configured, and you are able to appropriately scale up or scale out to multiple nodes. WWI does needs help optimizing their database to handle these demanding workloads at scale. They have looked moving to a non-relational database to speed up queries, but that option added too much complexity to manage multiple databases, losing the ability to wrap their operations inside of transactions, re-architect their application, and migrate their historical data. In addition, they rely on Postgres' ability to create complicated ways of representing and indexing their data, which is impossible to do with a column store. Their need for high transaction volume and a real-time data set ruled out a lot of off-the-shelf data warehouses, where they would need to create a lambda architecture to handle both speeds of feeds.</p>
</li>
<li>
<p><strong>Resilient stream processing</strong> - WWI is processing their streaming data through a web-based cluster that balances HTTP requests in round-robin fashion. When a node is processing the data and writing it to Postgres, subsequent requests are handled by available nodes. However, if processing fails for any reason, they risk losing that data and have no way to pick up where it left off. They have tried creating their own poison queue to reprocess these failed messages, but if the failed node is unable to add the data to the queue, then it is lost. The WWI technical team is aware of existing products and services that can help improve their stream processing and add resiliency, but they currently lack the skills and bandwidth to implement a solution for these complex scenarios. They are interested to see how Azure can help them rapidly create a solution for resilient stream processing and reduce their technical debt.</p>
</li>
<li>
<p><strong>Advanced dashboards</strong> - They would like a way to more rapidly create reports and be able to display them on a dashboard that can be customized and show real-time updates.</p>
</li>
</ol>
<h2><a id="user-content-solution-architecture" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#solution-architecture"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Solution architecture</h2>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Media/outline-architecture.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Media/outline-architecture.png" alt="High-level architecture described in text below." title="High-level architecture" style="max-width:100%;"></a></p>
<p>The solution begins with multiple sources of clickstream data, each from a different tenant, flowing in through a Kafka streaming ingest managed service provided by Azure Event Hubs. This allows Wide World Importers to continue using their existing code to produce Kafka events. An Apache Spark cluster running on Azure Databricks processes and transforms the data in real time, using Structured Streaming. Azure Data Lake Storage is used to store the Structured Streaming checkpoint for resiliency to recover from errors and prevent lost data. Azure Key Vault is used to securely store secrets, such as the Event Hubs and PostgreSQL connection strings, and serves as a backing for Azure Databricks secret scopes. All event data is stored written to an Azure Database for PostgreSQL managed Hyperscale (Citus) database cluster, offering both scale-up and scale-out capability with features that simplify sharding and partitioning time series and multi-tenant data. Data is periodically written to rollup tables, using a background process that runs on a scheduled basis, to provide extremely fast querying of pre-aggregated data that does not interfere with incoming streams of late-arriving data. Websites and Power BI reports and dashboards use this data to provide rich reports that can be run at scale with minimum processing time. An on-premises data gateway cluster runs on several VMs to update the Power BI dashboards at regular intervals to match the pre-aggregation processes that write to the rollup tables.</p>
<h2><a id="user-content-requirements" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#requirements"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Requirements</h2>
<ol>
<li>Microsoft Azure subscription must be pay-as-you-go or MSDN.
<ul>
<li>Trial subscriptions will not work.</li>
<li><strong>IMPORTANT</strong>: To complete the OAuth 2.0 access components of this hands-on lab you must have permissions within your Azure subscription to create an App Registration and service principal within Azure Active Directory.</li>
</ul>
</li>
<li>Install <a href="https://www.pgadmin.org/download/" rel="nofollow">pgAdmin</a> 4 or greater.</li>
<li>Install <a href="https://powerbi.microsoft.com/desktop/" rel="nofollow">Power BI Desktop</a>.</li>
</ol>
<h2><a id="user-content-before-the-hands-on-lab" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#before-the-hands-on-lab"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Before the hands-on lab</h2>
<p>Refer to the Before the hands-on lab setup guide manual before continuing to the lab exercises.</p>
<h2><a id="user-content-exercise-1-connect-to-and-set-up-your-database" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#exercise-1-connect-to-and-set-up-your-database"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exercise 1: Connect to and set up your database</h2>
<p>Duration: 20 minutes</p>
<p>In this exercise, you will obtain your PostgreSQL connection string and use the pgAdmin tool to connect and create your schema for this lab.</p>
<h3><a id="user-content-task-1-connect-to-the-postgresql-database" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-1-connect-to-the-postgresql-database"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 1: Connect to the PostgreSQL database</h3>
<ol>
<li>
<p>Open the <a href="https://portal.azure.com/" rel="nofollow">Azure portal</a> and navigate to the resource group you created (<code>hands-on-lab-SUFFIX</code> where SUFFIX is your unique identifier).</p>
</li>
<li>
<p>Find your PostgreSQL server group and select it. (The server group name will not have a suffix. Items with names ending in, for example, "-c", "-w0", or "-w1" are not the server group.)</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/resource-group-pg-server-group.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/resource-group-pg-server-group.png" alt="The PostgreSQL server group is highlighted in the resource group." title="Resource group" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Connection strings</strong> in the left-hand menu. Copy the string marked <strong>JDBC</strong>.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/postgres-jdbc-connection-string.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/postgres-jdbc-connection-string.png" alt="The Connection strings item is selected and the JDBC connection string is highlighted." title="Connection strings" style="max-width:100%;"></a></p>
</li>
<li>
<p>Replace "{your_password}" with the administrative password you chose earlier (such as <code>Abc!1234567890</code>). The system doesn't store your plaintext password and so can't display it for you in the connection string. <strong>Save the connection string</strong> to Notebook or similar text editor for later.</p>
</li>
<li>
<p>Launch pgAdmin. Select <strong>Add New Server</strong> on the home page.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pgadmin-home.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pgadmin-home.png" alt="The pgAdmin home page is displayed with Add New Server highlighted." title="pgAdmin" style="max-width:100%;"></a></p>
</li>
<li>
<p>In the <strong>General</strong> tab of the Create Server dialog, enter <strong>Lab</strong> into the Name field.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pgadmin-create-server-general.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pgadmin-create-server-general.png" alt="The Name field is filled out in the General tab." title="Create Server - General tab" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select the <strong>Connection</strong> tab. Enter the following into the fields within the Connection tab:</p>
<ul>
<li><strong>Host name/address</strong>: paste the host value from the connection string you copied earlier (the string of text between <code>jdbc:postgresql://</code> and <code>:5432</code>. For example: <code>&lt;your-server-name&gt;.postgres.database.azure.com</code>)</li>
<li><strong>Port</strong>: 5432</li>
<li><strong>Maintenance database</strong>: citus</li>
<li><strong>Username</strong>: citus</li>
<li><strong>Password</strong>: The administrative password you chose earlier (such as <code>Abc!1234567890</code>).</li>
<li><strong>Save password?</strong>: Check the box.</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pgadmin-create-server-connection.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pgadmin-create-server-connection.png" alt="The previously described fields are filled in within the Connection tab." title="Create Server - Connection tab" style="max-width:100%;"></a></p>
</li>
<li>
<p>Click the <strong>Save</strong> button.</p>
</li>
<li>
<p>Expand the newly added <strong>Lab</strong> server under the Servers tree on the pgAdmin home page. You should be able to expand the citus database.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pgadmin-home-connected.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pgadmin-home-connected.png" alt="The pgAdmin home page is displayed and the Lab server is expanded." title="pgAdmin home" style="max-width:100%;"></a></p>
</li>
</ol>
<h3><a id="user-content-task-2-create-a-table-to-store-clickstream-data" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-2-create-a-table-to-store-clickstream-data"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 2: Create a table to store clickstream data</h3>
<p>In this task, you will create the <code>events</code> raw table to capture every clickstream event. This table is partitioned by <code>event_time</code> since we are using it to store time series data. The script you execute to create the schema creates a partition every 5 minutes, using <a href="https://www.citusdata.com/blog/2018/01/24/citus-and-pg-partman-creating-a-scalable-time-series-database-on-PostgreSQL/" rel="nofollow">pg_partman</a>.</p>
<p>Partitioning is the key to high performance, as it allows you to break up data into further smaller chunks based on time windows. One of the keys to fast data loading is to avoid using large indexes. Traditionally, you would use block-range (BRIN) indexes to speed up range scans over roughly-sorted data. However, when you have unsorted data, BRIN indexes tend to perform poorly. Partitioning helps keep indexes small. It does this by dividing tables into partitions, avoiding fragmentation of data while maintaining smaller indexes. In addition, it allows you to query only a smaller portion of the data when you run queries for particular time windows, leading to faster SELECT performance.</p>
<ol>
<li>
<p>With the <strong>Lab</strong> server expanded under the Servers tree in pgAdmin, expand Databases then select <strong>citus</strong>. When the citus database is highlighted, select the <strong>Query Tool</strong> button above.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pgadmin-query-tool-button.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pgadmin-query-tool-button.png" alt="The citus database is selected in pgAdmin, and the Query Tool is highlighted." title="Query Tool" style="max-width:100%;"></a></p>
</li>
<li>
<p>Paste the following query into the Query Editor:</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">CREATE</span> <span class="pl-k">TABLE</span> <span class="pl-en">events</span>(
    event_id <span class="pl-k">serial</span>,
    event_time <span class="pl-k">timestamptz</span> default now(),
    customer_id <span class="pl-k">bigint</span>,
    event_type <span class="pl-k">text</span>,
    country <span class="pl-k">text</span>,
    browser <span class="pl-k">text</span>,
    device_id <span class="pl-k">bigint</span>,
    session_id <span class="pl-k">bigint</span>
)
PARTITION BY RANGE (event_time);

<span class="pl-c"><span class="pl-c">--</span>Create 5-minutes partitions</span>
<span class="pl-k">SELECT</span> <span class="pl-c1">partman</span>.<span class="pl-c1">create_parent</span>(<span class="pl-s"><span class="pl-pds">'</span>public.events<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>event_time<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>native<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>5 minutes<span class="pl-pds">'</span></span>);
<span class="pl-k">UPDATE</span> <span class="pl-c1">partman</span>.<span class="pl-c1">part_config</span> <span class="pl-k">SET</span> infinite_time_partitions <span class="pl-k">=</span> true;</pre></div>
</li>
<li>
<p>Press F5 to execute the query, or select the <strong>Execute</strong> button on the toolbar above.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pgadmin-query-editor-execute.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pgadmin-query-editor-execute.png" alt="The execute button is highlighted in the Query Editor." title="Query Editor" style="max-width:100%;"></a></p>
</li>
<li>
<p>After executing the query, verify that the new <code>events</code> table was created under the <strong>citus</strong> database by expanding <strong>Schemas</strong> -&gt; <strong>public</strong> -&gt; <strong>Tables</strong> in the navigation tree on the left. You may have to refresh the Schemas list by right-clicking, then selecting Refresh.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pgadmin-events-table.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pgadmin-events-table.png" alt="The new events table is displayed in the navigation tree on the left." title="Events table" style="max-width:100%;"></a></p>
</li>
</ol>
<h3><a id="user-content-task-3-shard-tables-across-nodes" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-3-shard-tables-across-nodes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 3: Shard tables across nodes</h3>
<p>In this task, you will create two rollup tables for storing aggregated data pulled from the raw events table. Later, you will create rollup functions and schedule them to run periodically.</p>
<p>The two tables you will create are:</p>
<ul>
<li><strong>rollup_events_5mins</strong>: stores aggregated data in 5-minute intervals.</li>
<li><strong>rollup_events_1hr</strong>: stores aggregated data every 1 hour.</li>
</ul>
<p>You will notice in the script below, as well as in the script above, that we are sharding each of the tables on <code>customer_id</code> column. The sharding logic is handled for you by the Hyperscale server group (enabled by Citus), allowing you to horizontally scale your database across multiple managed Postgres servers. This provides you with multi-tenancy because the data is sharded by the same Tenant ID (customer_id). Because we are sharding on the same ID for our raw events table and rollup tables, our data stored in both types of table are automatically co-located for us by Citus. Furthermore, this means that aggregations can be performed locally without crossing network boundaries when we insert our events data into the rollup tables. Our dashboard queries that execute against the rollup tables are always for a particular tenant (customer id). Hyperscale clusters allow us to parallelize our aggregations across shards, then perform a SELECT on a rollup for a particular customer from the dashboard, and have it automatically routed to the appropriate shard.</p>
<p>Another important thing to note about the rollup tables is that we are using <a href="https://en.wikipedia.org/wiki/HyperLogLog" rel="nofollow">HyperLogLog</a> (HLL) data types to very rapidly obtain distinct counts for devices and sessions (<code>device_distinct_count</code> and <code>session_distinct_count</code>). HyperLogLog is a fixed-size data structure that is extremely fast at estimating distinct value counts with tunable precision. For example, in 1280 bytes <code>HLL</code> can estimate the count of tens of billions of distinct values with only a few percent error (<a href="https://github.com/citusdata/postgresql-hll">source</a>).</p>
<p>It is very common to run <code>SELECT COUNT(DISTINCT)</code> on your database to update a dashboard with the number of unique items such as unique purchases of a particular item, unique users, unique page visits, etc. However, when you are using distributed systems, as Wide World Importers is in this situation, calculating unique counts is a difficult problem to solve. One reason for this is that there can be overlapping records across the workers. You could get around this by pulling all the data into a single machine and perform the count, but this does not scale well. Another option is to perform map/reduce functions, which scales, but are very slow to execute. The better option that provides scalability and speed is to use approximation algorithms to provide distinct count results within mathematically provable error bounds. This is why we are using HyperLogLog.</p>
<p>If we were not using HLL, we would be limited to creating a large number of rollup tables. You would need rollup tables for various time periods, and rollup tables to calculate the distinct counts constrained by combinations of columns. For example, if you pre-aggregate over minutes, then you cannot answer queries asking for distinct counts over an hour. If you try and each minute's result to find hourly visits to a specific page, for example, the result will be unreliable because you are likely to have overlapping records within those different minutes. This problem is further complicated when you want to return a count of page visits filtered by time and unique page visit counts by user or a combination of the two. HLL allows us to use one or two rollup tables to answer all of these queries and more. This is because HLL overcomes the overlapping records problem by encoding the data in a way that allows summing up individual unique counts without re-counting overlapping records. When we write data to the HLL columns, we also hash it to ensure uniform distribution. We'll go over this in a bit.</p>
<ol>
<li>
<p>With the <strong>Lab</strong> server expanded under the Servers tree in pgAdmin, expand Databases then select <strong>citus</strong>. When the citus database is highlighted, select the <strong>Query Tool</strong> button above.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pgadmin-query-tool-button.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pgadmin-query-tool-button.png" alt="The citus database is selected in pgAdmin, and the Query Tool is highlighted." title="Query Tool" style="max-width:100%;"></a></p>
</li>
<li>
<p>Paste the following query into the Query Editor:</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">CREATE</span> <span class="pl-k">TABLE</span> <span class="pl-en">rollup_events_5min</span> (
     customer_id <span class="pl-k">bigint</span>,
     event_type <span class="pl-k">text</span>,
     country <span class="pl-k">text</span>,
     browser <span class="pl-k">text</span>,
     minute <span class="pl-k">timestamptz</span>,
     event_count <span class="pl-k">bigint</span>,
     device_distinct_count hll,
     session_distinct_count hll,
     top_devices_1000 jsonb
 );
 <span class="pl-k">CREATE</span> <span class="pl-k">UNIQUE INDEX</span> <span class="pl-en">rollup_events_5min_unique_idx</span> <span class="pl-k">ON</span> rollup_events_5min(customer_id,event_type,country,browser,minute);
 <span class="pl-k">SELECT</span> create_distributed_table(<span class="pl-s"><span class="pl-pds">'</span>rollup_events_5min<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>customer_id<span class="pl-pds">'</span></span>);

 <span class="pl-k">CREATE</span> <span class="pl-k">TABLE</span> <span class="pl-en">rollup_events_1hr</span> (
     customer_id <span class="pl-k">bigint</span>,
     event_type <span class="pl-k">text</span>,
     country <span class="pl-k">text</span>,
     browser <span class="pl-k">text</span>,
     hour <span class="pl-k">timestamptz</span>,
     event_count <span class="pl-k">bigint</span>,
     device_distinct_count hll,
     session_distinct_count hll,
     top_devices_1000 jsonb
 );
 <span class="pl-k">CREATE</span> <span class="pl-k">UNIQUE INDEX</span> <span class="pl-en">rollup_events_1hr_unique_idx</span> <span class="pl-k">ON</span> rollup_events_1hr(customer_id,event_type,country,browser,hour);
 <span class="pl-k">SELECT</span> create_distributed_table(<span class="pl-s"><span class="pl-pds">'</span>rollup_events_1hr<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>customer_id<span class="pl-pds">'</span></span>);

 <span class="pl-c"><span class="pl-c">--</span>shard the events table as well</span>
 <span class="pl-k">SELECT</span> create_distributed_table(<span class="pl-s"><span class="pl-pds">'</span>events<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>customer_id<span class="pl-pds">'</span></span>);</pre></div>
<blockquote>
<p><strong>Note</strong>: We are sharding each of the tables on the <code>customer_id</code> column. This is done by calling the <code>create_distributed_table</code> function. When you run this function, Citus inserts metadata marking the table as distributed and creates shards on the worker nodes. Then incoming data into these tables is routed to the right node based on customer id. Because we are sharding on the same ID for our raw events table and rollup tables, our data stored in both types of table are automatically co-located for us by Citus.</p>
</blockquote>
</li>
<li>
<p>Press F5 to execute the query, or select the <strong>Execute</strong> button on the toolbar above.</p>
</li>
<li>
<p>After executing the query, verify that the new <code>rollup_events_1hr</code> and <code>rollup_events_5min</code> tables were created under the <strong>citus</strong> database by expanding <strong>Schemas</strong> -&gt; <strong>public</strong> -&gt; <strong>Tables</strong> in the navigation tree on the left. You may have to refresh the Schemas list by right-clicking, then selecting Refresh.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pgadmin-rollup-tables.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pgadmin-rollup-tables.png" alt="The new rollup tables are displayed in the navigation tree on the left." title="Rollup tables" style="max-width:100%;"></a></p>
</li>
</ol>
<h2><a id="user-content-exercise-2-add-secrets-to-key-vault-and-configure-azure-databricks" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#exercise-2-add-secrets-to-key-vault-and-configure-azure-databricks"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exercise 2: Add secrets to Key Vault and configure Azure Databricks</h2>
<p>Duration: 30 minutes</p>
<p>In this exercise, you will add secrets to Key Vault to securely store secrets, such as your PostgreSQL database, Event Hubs (Kafka), and Azure Data Lake Storage Gen2 credentials. You will then create a new Databricks cluster configure your Azure Databricks workspace to use a Key Vault-backed secret store to access those secrets.</p>
<h3><a id="user-content-task-1-obtain-and-store-adls-gen2-secrets-in-azure-key-vault" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-1-obtain-and-store-adls-gen2-secrets-in-azure-key-vault"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 1: Obtain and store ADLS Gen2 secrets in Azure Key Vault</h3>
<ol>
<li>
<p>Open the <a href="https://portal.azure.com/" rel="nofollow">Azure portal</a> and navigate to the resource group you created (<code>hands-on-lab-SUFFIX</code> where SUFFIX is your unique identifier).</p>
</li>
<li>
<p>Find your storage account (<code>wwiadlsSUFFIX</code>) and select it.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/resource-group-storage-account.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/resource-group-storage-account.png" alt="The storage account is highlighted within the resource group." title="Storage account" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Access keys</strong> under Settings on the left-hand menu. You are going to copy the <strong>Storage account name</strong> and <strong>Key</strong> values and add them as secrets in your Key Vault account.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/storage-account-keys.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/storage-account-keys.png" alt="The storage account Access keys blade is displayed, and the Storage account name and Key are highlighted." title="Access keys" style="max-width:100%;"></a></p>
</li>
<li>
<p>Open a new browser tab or window and navigate to your Azure Key Vault account in the Azure portal, then select <strong>Secrets</strong> under Settings on the left-hand menu. On the Secrets blade, select <strong>+ Generate/Import</strong> on the top toolbar.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/key-vault-generate-secret.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/key-vault-generate-secret.png" alt="In Key Vault, Secrets is selected in the left-hand menu, and the Generate/Import button is highlighted." title="Secrets" style="max-width:100%;"></a></p>
</li>
<li>
<p>On the Create a secret blade, enter the following:</p>
<ul>
<li><strong>Upload options</strong>: Select Manual.</li>
<li><strong>Name</strong>: Enter "ADLS-Gen2-Account-Name".</li>
<li><strong>Value</strong>: Paste the Storage account name value you copied in an earlier step.</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/key-vault-add-account-name.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/key-vault-add-account-name.png" alt="The Create a secret form is displayed with the previously defined field values." title="Create a secret" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Create</strong>.</p>
</li>
<li>
<p>Select <strong>+ Generate/Import</strong> again on the top toolbar to create another secret.</p>
</li>
<li>
<p>On the Create a secret blade, enter the following:</p>
<ul>
<li><strong>Upload options</strong>: Select Manual.</li>
<li><strong>Name</strong>: Enter "ADLS-Gen2-Account-Key".</li>
<li><strong>Value</strong>: Paste the Storage account Key value you copied in an earlier step.</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/key-vault-add-account-key.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/key-vault-add-account-key.png" alt="The Create a secret form is displayed with the previously defined field values." title="Create a secret" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Create</strong>.</p>
</li>
<li>
<p>Select <strong>+ Generate/Import</strong> again on the top toolbar to create another secret.</p>
</li>
<li>
<p>On the Create a secret blade, enter the following:</p>
<ul>
<li><strong>Upload options</strong>: Select Manual.</li>
<li><strong>Name</strong>: Enter "Database-Connection-String".</li>
<li><strong>Value</strong>: Paste the PostgreSQL JDBC connection string you copied in an earlier step. Make sure it contains your password.</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/key-vault-add-connection-string.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/key-vault-add-connection-string.png" alt="The Create a secret form is displayed with the previously defined field values." title="Create a secret" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Create</strong>.</p>
</li>
</ol>
<h3><a id="user-content-task-2-obtain-and-store-event-hubs-kafka-secrets-in-azure-key-vault" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-2-obtain-and-store-event-hubs-kafka-secrets-in-azure-key-vault"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 2: Obtain and store Event Hubs (Kafka) secrets in Azure Key Vault</h3>
<p>In this task, you will obtain the Event Hubs connection string and store it as a secret in Azure Key Vault, along with the fully qualified domain name. This information will be used by Apache Spark within Azure Databricks to consume and process the streaming data using the Kafka protocol.</p>
<ol>
<li>
<p>Open the <a href="https://portal.azure.com/" rel="nofollow">Azure portal</a> and navigate to the resource group you created (<code>hands-on-lab-SUFFIX</code> where SUFFIX is your unique identifier).</p>
</li>
<li>
<p>Find your Event Hubs namespace (<code>wwi-namespace-SUFFIX</code>) and select it.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/resource-group-event-hubs.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/resource-group-event-hubs.png" alt="The Event Hubs Namespace is highlighted within the resource group." title="Event Hubs Namespace" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Shared access policies</strong> under Settings in the left-hand menu, then select the <strong>RootManageSharedAccessKey</strong> policy.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/event-hubs-shared-access-policies.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/event-hubs-shared-access-policies.png" alt="The Event Hubs shared access policies blade is displayed." title="Shared access policies" style="max-width:100%;"></a></p>
</li>
<li>
<p>Copy the <strong>Connection string-primary key</strong> value and save it to Notepad or similar text editor.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/event-hubs-shared-access-policy.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/event-hubs-shared-access-policy.png" alt="The SAS Policy is displayed and the copy button for the connection string is highlighted." title="SAS Policy" style="max-width:100%;"></a></p>
</li>
<li>
<p>Open a new browser tab or window and navigate to your Azure Key Vault account in the Azure portal, then select <strong>Secrets</strong> under Settings on the left-hand menu. On the Secrets blade, select <strong>+ Generate/Import</strong> on the top toolbar.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/key-vault-generate-secret.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/key-vault-generate-secret.png" alt="In Key Vault, Secrets is selected in the left-hand menu, and the Generate/Import button is highlighted." title="Secrets" style="max-width:100%;"></a></p>
</li>
<li>
<p>On the Create a secret blade, enter the following:</p>
<ul>
<li><strong>Upload options</strong>: Select Manual.</li>
<li><strong>Name</strong>: Enter "Kafka-Connection-String".</li>
<li><strong>Value</strong>: Paste the Event Hubs connection string you copied in an earlier step.</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/key-vault-add-kafka-connection-string.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/key-vault-add-kafka-connection-string.png" alt="The Create a secret form is displayed with the previously defined field values." title="Create a secret" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Create</strong>.</p>
</li>
<li>
<p>Select <strong>+ Generate/Import</strong> again on the top toolbar to create another secret.</p>
</li>
<li>
<p>On the Create a secret blade, enter the following:</p>
<ul>
<li><strong>Upload options</strong>: Select Manual.</li>
<li><strong>Name</strong>: Enter "Kafka-Server".</li>
<li><strong>Value</strong>: Paste the fully qualified domain name (FQDN) that points to your Event Hubs namespace from the connection string (e.g. <code>wwi-namespace-SUFFIX.servicebus.windows.net</code>). The FQDN can be found within your connection string as follows:</li>
</ul>
<p><code>Endpoint=sb://</code> <strong>wwi-namespace-SUFFIX.servicebus.windows.net</strong> <code>/;SharedAccessKeyName=XXXXXX;SharedAccessKey=XXXXXX</code></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/key-vault-add-kafka-server.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/key-vault-add-kafka-server.png" alt="The Create a secret form is displayed with the previously defined field values." title="Create a secret" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Create</strong>.</p>
</li>
</ol>
<h3><a id="user-content-task-3-create-a-service-principal-for-oauth-access-to-the-adls-gen2-filesystem" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-3-create-a-service-principal-for-oauth-access-to-the-adls-gen2-filesystem"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 3: Create a service principal for OAuth access to the ADLS Gen2 filesystem</h3>
<p>As an added layer of security when accessing an ADLS Gen2 filesystem using Databricks you can use OAuth 2.0 for authentication. In this task, you will use the Azure CLI to create an identity in Azure Active Directory (Azure AD) known as a service principal to facilitate the use of OAuth authentication.</p>
<blockquote>
<p><strong>IMPORTANT</strong>: You must have permissions within your Azure subscription to create an App registration and service principal within Azure Active Directory to complete this task.</p>
</blockquote>
<ol>
<li>
<p>In the <a href="https://portal.azure.com/" rel="nofollow">Azure portal</a>, select the <strong>Cloud Shell</strong> icon in the top toolbar.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/cloud-shell-icon.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/cloud-shell-icon.png" alt="The Azure Cloud Shell icon is highlighted in the Azure portal&#39;s top menu." title="Azure Cloud Shell" style="max-width:100%;"></a></p>
</li>
<li>
<p>Ensure <strong>Bash</strong> is selected in the Cloud Shell pane.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/cloud-shell-prompt.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/cloud-shell-prompt.png" alt="The Azure Cloud Shell is displayed with its default prompt." title="Azure Cloud Shell" style="max-width:100%;"></a></p>
</li>
<li>
<p>If you have multiple subscriptions, choose the appropriate subscription in which the resource should be billed. List all your subscriptions by entering the following into the shell:</p>
<div class="highlight highlight-source-shell"><pre>az account list</pre></div>
</li>
<li>
<p>Select the specific subscription ID under your account using <code>az account set</code> command. Copy the <code>id</code> value from the output of the previous command for the subscription you wish to use into the <code>subscription id</code> placeholder:</p>
<div class="highlight highlight-source-shell"><pre>az account <span class="pl-c1">set</span> --subscription <span class="pl-k">&lt;</span>subscription id<span class="pl-k">&gt;</span></pre></div>
</li>
<li>
<p>Next, you will issue a command to create a service principal named <strong>wwi-oss-sp</strong> and assign it to the <em>Storage Blob Data Contributor</em> role on your <strong>ADLS Gen2 Storage account</strong>. The command will be in the following format:</p>
<div class="highlight highlight-source-shell"><pre>az ad sp create-for-rbac -n <span class="pl-s"><span class="pl-pds">"</span>wwi-oss-sp<span class="pl-pds">"</span></span> --role <span class="pl-s"><span class="pl-pds">"</span>Storage Blob Data Contributor<span class="pl-pds">"</span></span> --scopes {adls-gen2-storage-account-resource-id}</pre></div>
<blockquote>
<p><strong>IMPORTANT</strong>: You will need to replace the <code>{adls-gen2-storage-account-resource-id}</code> value with the resource ID of your ADLS Gen2 Storage account.</p>
</blockquote>
</li>
<li>
<p>To retrieve the ADLS Gen2 Storage account resource ID you need to replace above, navigate to the resource group you created (<code>hands-on-lab-SUFFIX</code> where SUFFIX is your unique identifier).</p>
</li>
<li>
<p>In your hands-on-lab-SUFFIX resource group, select the ADLS Gen2 Storage account you provisioned previously, and on the ADLS Gen2 Storage account blade select <strong>Properties</strong> under <strong>Settings</strong> in the left-hand menu, and then select the copy to clipboard button to the right of the <strong>Storage account resource ID</strong> value.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/adls-gen2-properties.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/adls-gen2-properties.png" alt="On the ADLS Gen2 Storage account blade, Properties is selected and highlighted in the left-hand menu, and the copy to clipboard button is highlighted next to Storage account resource ID." title="ADLS Gen2 Storage account properties" style="max-width:100%;"></a></p>
</li>
<li>
<p>Paste the Storage account resource ID into the command above, and then copy and paste the updated <code>az ad sp create-for-rbac</code> command at the Cloud Shell prompt and press <code>Enter</code>. The command should be similar to the following, with your subscription ID and resource group name:</p>
<div class="highlight highlight-source-shell"><pre>az ad sp create-for-rbac -n <span class="pl-s"><span class="pl-pds">"</span>wwi-oss-sp<span class="pl-pds">"</span></span> --role <span class="pl-s"><span class="pl-pds">"</span>Storage Blob Data Contributor<span class="pl-pds">"</span></span> --scope /subscriptions/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/resourceGroups/hands-on-lab/providers/Microsoft.Storage/storageAccounts/wwiadlsoss</pre></div>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/azure-cli-create-sp.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/azure-cli-create-sp.png" alt="The az ad sp create-for-rbac command is entered into the Cloud Shell, and the output of the command is displayed." title="Azure CLI" style="max-width:100%;"></a></p>
</li>
<li>
<p>Copy the output from the command into a text editor, as you will need it in the following steps. The output should be similar to:</p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>appId<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>16fae522-05f9-4e4d-8ccd-11db01909331<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>displayName<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>wwi-oss-sp<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>http://wwi-oss-sp<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>00713451-2b0e-416f-b5bf-fbb43c1836d5<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>tenant<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>d280491c-XXXX-XXXX-XXXX-XXXXXXXXXXXX<span class="pl-pds">"</span></span>
}</pre></div>
</li>
<li>
<p>To verify the role assignment, select <strong>Access control (IAM)</strong> from the left-hand menu of the <strong>ADLS Gen2 Storage account</strong> blade, and then select the <strong>Role assignments</strong> tab and locate <strong>wwi-oss-sp</strong> under the <em>STORAGE BLOB DATA CONTRIBUTOR</em> role.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/storage-account-role-assignments.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/storage-account-role-assignments.png" alt="The Role assignments tab is displayed, with wwi-oss-sp account highlighted under STORAGE BLOB DATA CONTRIBUTOR role in the list." title="Role assignments" style="max-width:100%;"></a></p>
</li>
</ol>
<h3><a id="user-content-task-4-add-the-service-principal-credentials-and-tenant-id-to-azure-key-vault" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-4-add-the-service-principal-credentials-and-tenant-id-to-azure-key-vault"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 4: Add the service principal credentials and Tenant Id to Azure Key Vault</h3>
<ol>
<li>
<p>To provide access your ADLS Gen2 account from Azure Databricks you will use secrets stored in your Azure Key Vault account to provide the credentials of your newly created service principal within Databricks. Navigate to your Azure Key Vault account in the Azure portal, then select <strong>Access Policies</strong> and select the <strong>+ Add new</strong> button.</p>
</li>
<li>
<p>Choose the account that you are currently logged into the portal with as the principal and <strong>check Select all</strong> under <code>key permissions</code>, <code>secret permissions</code>, and <code>certificate permissions</code>, then click OK and then click <strong>Save</strong>.</p>
</li>
<li>
<p>Now select <strong>Secrets</strong> under Settings on the left-hand menu. On the Secrets blade, select <strong>+ Generate/Import</strong> on the top toolbar.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/key-vault-generate-secret.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/key-vault-generate-secret.png" alt="Secrets is highlighted on the left-hand menu, and Generate/Import is highlighted on the top toolbar of the Secrets blade." title="Key Vault secrets blade" style="max-width:100%;"></a></p>
</li>
<li>
<p>On the Create a secret blade, enter the following:</p>
<ul>
<li><strong>Upload options</strong>: Select Manual.</li>
<li><strong>Name</strong>: Enter "WWI-SP-Client-ID".</li>
<li><strong>Value</strong>: Paste the <strong>appId</strong> value from the Azure CLI output you copied in an earlier step.</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/key-vault-create-wwi-sp-client-id-secret.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/key-vault-create-wwi-sp-client-id-secret.png" alt="The Create a secret blade is displayed, with the previously mentioned values entered into the appropriate fields." title="Create a secret" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Create</strong>.</p>
</li>
<li>
<p>Select <strong>+ Generate/Import</strong> again on the top toolbar to create another secret.</p>
</li>
<li>
<p>On the Create a secret blade, enter the following:</p>
<ul>
<li><strong>Upload options</strong>: Select Manual.</li>
<li><strong>Name</strong>: Enter "WWI-SP-Client-Key".</li>
<li><strong>Value</strong>: Paste the <strong>password</strong> value from the Azure CLI output you copied in an earlier step.</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/key-vault-create-wwi-sp-client-key-secret.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/key-vault-create-wwi-sp-client-key-secret.png" alt="The Create a secret blade is displayed, with the previously mentioned values entered into the appropriate fields." title="Create a secret" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Create</strong>.</p>
</li>
<li>
<p>To perform authentication using the service principal account in Databricks you will also need to provide your Azure AD Tenant ID. Select <strong>+ Generate/Import</strong> again on the top toolbar to create another secret.</p>
</li>
<li>
<p>On the Create a secret blade, enter the following:</p>
<ul>
<li><strong>Upload options</strong>: Select Manual.</li>
<li><strong>Name</strong>: Enter "Azure-Tenant-ID".</li>
<li><strong>Value</strong>: Paste the <strong>tenant</strong> value from the Azure CLI output you copied in an earlier step.</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/key-vault-create-azure-tenant-id-secret.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/key-vault-create-azure-tenant-id-secret.png" alt="The Create a secret blade is displayed, with the previously mentioned values entered into the appropriate fields." title="Create a secret" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Create</strong>.</p>
</li>
</ol>
<h3><a id="user-content-task-5-create-an-azure-databricks-cluster" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-5-create-an-azure-databricks-cluster"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 5: Create an Azure Databricks cluster</h3>
<p>In this task, you will connect to your Azure Databricks workspace and create a cluster to use for this hands-on lab.</p>
<ol>
<li>
<p>Return to the <a href="https://portal.azure.com/" rel="nofollow">Azure portal</a>, navigate to the Azure Databricks workspace located in your lab resource group, and select <strong>Launch Workspace</strong> from the overview blade, signing into the workspace with your Azure credentials, if required.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/databricks-launch-workspace.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/databricks-launch-workspace.png" alt="The Launch Workspace button is displayed on the Databricks Workspace Overview blade." title="Launch Workspace" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Clusters</strong> from the left-hand navigation menu, and then select <strong>+ Create Cluster</strong>.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/databricks-clusters.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/databricks-clusters.png" alt="The Clusters option in the left-hand menu is selected and highlighted, and the Create Cluster button is highlighted on the clusters page." title="Databricks Clusters" style="max-width:100%;"></a></p>
</li>
<li>
<p>On the Create Cluster screen, enter the following:</p>
<ul>
<li>
<p><strong>Cluster Name</strong>: Enter a name for your cluster, such as lab-cluster.</p>
</li>
<li>
<p><strong>Cluster Mode</strong>: Select Standard.</p>
</li>
<li>
<p><strong>Databricks Runtime Version</strong>: Select Runtime: 5.4 (Scala 2.11, Spark 2.4.3).</p>
</li>
<li>
<p><strong>Python Version</strong>: Select 3.</p>
</li>
<li>
<p><strong>Enable autoscaling</strong>: Ensure this is checked.</p>
</li>
<li>
<p><strong>Terminate after XX minutes of inactivity</strong>: Leave this checked, and the number of minutes set to 120.</p>
</li>
<li>
<p><strong>Worker Type</strong>: Select Standard_DS4_v2.</p>
<ul>
<li><strong>Min Workers</strong>: Leave set to 2.</li>
<li><strong>Max Workers</strong>: Leave set to 8.</li>
</ul>
</li>
<li>
<p><strong>Driver Type</strong>: Set to Same as worker.</p>
</li>
<li>
<p>Expand Advanced Options and enter the following into the Spark Config box:</p>
<div class="highlight highlight-source-shell"><pre>spark.driver.extraJavaOptions -Djava.security.properties=
spark.executor.extraJavaOptions -Djava.security.properties=</pre></div>
<blockquote>
<p><strong>Note</strong>: The two values in the advanced options fixes an issue caused by GCM ciphers being disabled in Databricks version 5.1 and greater. Without these settings, you will receive the following error when attempting to connect to the PostgreSQL Hyperscale cluster: <code>SSL error: Received fatal alert: handshake_failure</code>.</p>
</blockquote>
</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/databricks-create-new-cluster.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/databricks-create-new-cluster.png" alt="The Create Cluster screen is displayed, with the values specified above entered into the appropriate fields." title="Create a new Databricks cluster" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Create Cluster</strong>. It will take 3-5 minutes for the cluster to be created and started.</p>
</li>
</ol>
<h3><a id="user-content-task-6-load-lab-notebooks-into-azure-databricks" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-6-load-lab-notebooks-into-azure-databricks"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 6: Load lab notebooks into Azure Databricks</h3>
<p>In this task, you will import the notebooks contained in the <a href="https://github.com/Microsoft/MCW-Managed-open-source-databases-on-Azure">Visualizing real-time data with Azure Database for PostgreSQL Hyperscale MCW GitHub repo</a> into your Azure Databricks workspace.</p>
<ol>
<li>
<p>Navigate to your Azure Databricks workspace in the Azure portal, and select <strong>Launch Workspace</strong> from the overview blade, signing into the workspace with your Azure credentials, if required.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/databricks-launch-workspace.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/databricks-launch-workspace.png" alt="The Launch Workspace button is displayed on the Databricks Workspace Overview blade." title="Launch Workspace" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Workspace</strong> from the left-hand menu, then select <strong>Users</strong> and select your user account (email address), and then select the down arrow on top of your user workspace and select <strong>Import</strong> from the context menu.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/databricks-workspace-import.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/databricks-workspace-import.png" alt="The Workspace menu is highlighted in the Azure Databricks workspace, and Users is selected with the current user&#39;s account selected and highlighted. Import is selected in the user&#39;s context menu." title="Import files into user workspace" style="max-width:100%;"></a></p>
</li>
<li>
<p>Within the Import Notebooks dialog, select <strong>URL</strong> for Import from, and then paste the following into the box: <code>https://github.com/solliancenet/MCW-Managed-open-source-databases-on-Azure/blob/master/Hands-on%20lab/Resources/OSSDatabases.dbc</code></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/databricks-import-notebooks.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/databricks-import-notebooks.png" alt="The Import Notebooks dialog is displayed" title="Import Notebooks dialog" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Import</strong>.</p>
</li>
<li>
<p>You should now see a folder named <strong>OSSDatabases</strong> in your user workspace. This folder contains all of the notebooks you will use throughout this hands-on lab.</p>
</li>
</ol>
<h3><a id="user-content-task-7-configure-azure-databricks-key-vault-backed-secrets" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-7-configure-azure-databricks-key-vault-backed-secrets"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 7: Configure Azure Databricks Key Vault-backed secrets</h3>
<p>In this task, you will connect to your Azure Databricks workspace and configure Azure Databricks secrets to use your Azure Key Vault account as a backing store.</p>
<ol>
<li>
<p>Return to the <a href="https://portal.azure.com/" rel="nofollow">Azure portal</a>, navigate to your newly provisioned Key Vault account and select <strong>Properties</strong> on the left-hand menu.</p>
</li>
<li>
<p>Copy the <strong>DNS Name</strong> and <strong>Resource ID</strong> property values and paste them to Notepad or some other text application that you can reference later. These values will be used in the next section.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/key-vault-properties.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/key-vault-properties.png" alt="Properties is selected on the left-hand menu, and DNS Name and Resource ID are highlighted to show where to copy the values from." title="Key Vault properties" style="max-width:100%;"></a></p>
</li>
<li>
<p>Navigate to the Azure Databricks workspace you provisioned above, and select <strong>Launch Workspace</strong> from the overview blade, signing into the workspace with your Azure credentials, if required.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/databricks-launch-workspace.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/databricks-launch-workspace.png" alt="The Launch Workspace button is displayed on the Databricks Workspace Overview blade." title="Launch Workspace" style="max-width:100%;"></a></p>
</li>
<li>
<p>In your browser's URL bar, append <strong>#secrets/createScope</strong> to your Azure Databricks base URL (for example, <a href="https://westus.azuredatabricks.net/#secrets/createScope" rel="nofollow">https://westus.azuredatabricks.net#secrets/createScope</a>).</p>
</li>
<li>
<p>Enter <code>key-vault-secrets</code> for the name of the secret scope.</p>
</li>
<li>
<p>Select <strong>Creator</strong> within the Manage Principal drop-down to specify only the creator (which is you) of the secret scope has the MANAGE permission.</p>
<blockquote>
<p>MANAGE permission allows users to read and write to this secret scope, and, in the case of accounts on the Azure Databricks Premium Plan, to change permissions for the scope.</p>
</blockquote>
<blockquote>
<p>Your account must have the Azure Databricks Premium Plan for you to be able to select Creator. This is the recommended approach: grant MANAGE permission to the Creator when you create the secret scope, and then assign more granular access permissions after you have tested the scope.</p>
</blockquote>
</li>
<li>
<p>Enter the <strong>DNS Name</strong> (for example, <a href="https://wwi-keyvault-oss.vault.azure.net/" rel="nofollow">https://wwi-keyvault-oss.vault.azure.net/</a>) and <strong>Resource ID</strong> you copied earlier during the Key Vault creation step, for example: <code>/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourcegroups/hands-on-lab/providers/Microsoft.KeyVault/vaults/wwi-keyvault-oss</code>.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/create-secret-scope.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/create-secret-scope.png" alt="Create Secret Scope form" title="Create Secret Scope" style="max-width:100%;"></a></p>
</li>
<li>
<p>Select <strong>Create</strong>.</p>
</li>
</ol>
<p>After a moment, you will see a dialog verifying that the secret scope has been created.</p>
<h2><a id="user-content-exercise-3-send-clickstream-data-to-kafka-and-process-it-in-real-time" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#exercise-3-send-clickstream-data-to-kafka-and-process-it-in-real-time"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exercise 3: Send clickstream data to Kafka and process it in real time</h2>
<p>Duration: 20 minutes</p>
<p>In this exercise, you will configure and run the <code>KafkaProducer</code> application to send clickstream data to your Kafka endpoint provided by your event hub. Then, you will run a notebook with your new Azure Databricks cluster to process the streaming data in real time and write it to your PostgreSQL <code>events</code> table.</p>
<h3><a id="user-content-task-1-configure-the-kafkaproducer-application" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-1-configure-the-kafkaproducer-application"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 1: Configure the KafkaProducer application</h3>
<ol>
<li>
<p>Navigate to your lab files you extracted for this lab. They should be located in a folder named <code>MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale</code> at the root directory of your hard drive (e.g. <code>C:\MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale</code>).</p>
</li>
<li>
<p>Navigate to the following folder within: <code>\Hands-on lab\Resources\Apps</code>.</p>
</li>
<li>
<p>Open either the <code>Windows</code> folder, or the <code>Linux</code> folder, depending on your operating system.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/lab-files.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/lab-files.png" alt="The lab files path is highlighted." title="Lab files" style="max-width:100%;"></a></p>
</li>
<li>
<p>Within the folder, open the <code>appsettings.json</code> file in a text editor, such as Notepad.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/lab-files-windows.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/lab-files-windows.png" alt="The appsettings.json file is highlighted." title="appsettings.json" style="max-width:100%;"></a></p>
</li>
<li>
<p>Paste your Event Hubs connection string you copied earlier in between the empty quotation marks next to <strong>EVENTHUB_CONNECTIONSTRING</strong>, then <strong>save</strong> the file.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/app-settings.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/app-settings.png" alt="The appsettings.json file is displayed with the Event Hubs connection string value added." title="Opened appsettings.json file" style="max-width:100%;"></a></p>
</li>
</ol>
<h3><a id="user-content-task-2-open-notebook-and-process-the-streaming-data" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-2-open-notebook-and-process-the-streaming-data"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 2: Open notebook and process the streaming data</h3>
<p>In this task, you will open a Databricks notebook and complete the instructions within.</p>
<ol start="6">
<li>
<p>Leave the folder open for now and navigate back to your Azure Databricks workspace. You will be instructed to run <code>KafkaProducer.exe</code> in this folder after you have completed some steps within the lab notebook.</p>
</li>
<li>
<p>Within your Azure Databricks workspace, select <strong>Workspace</strong> from the left-hand menu, then select <strong>Users</strong> and select your user account (email address). Now select the <strong>OSSDatabases</strong> folder and then select the <strong>1-Consume-Kafka</strong> notebook to open it.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/databricks-open-consume-kafka-notebook.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/databricks-open-consume-kafka-notebook.png" alt="The 1-Consume-Kafka notebook is highlighted in the Databricks workspace." title="Databricks workspace" style="max-width:100%;"></a></p>
</li>
<li>
<p>After opening the notebook, you need to attach your cluster. To do this, select <strong>Detached</strong> in the toolbar, then select your cluster. If your cluster is not running, you will need to start it.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/databricks-select-cluster.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/databricks-select-cluster.png" alt="The Detached toolbar item is highlighted, and the lab-cluster is highlighted." title="Attach cluster" style="max-width:100%;"></a></p>
</li>
<li>
<p>You can execute each cell by selecting the <strong>play button</strong> on the upper-right portion of the cell, or you can click anywhere in the cell and execute it by entering <strong>Ctrl+Enter</strong> on your keyboard.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/databricks-execute-cell.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/databricks-execute-cell.png" alt="The Play button is highlighted in the Databricks cell." title="Databricks cell" style="max-width:100%;"></a></p>
</li>
<li>
<p>After you have completed all the steps in the notebook, continue to the next exercise.</p>
</li>
</ol>
<h2><a id="user-content-exercise-4-rollup-real-time-data-in-postgresql" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#exercise-4-rollup-real-time-data-in-postgresql"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exercise 4: Rollup real-time data in PostgreSQL</h2>
<p>Duration: 15 minutes</p>
<p>In Wide World Importers' pipeline, they are storing event source data (clickstream time series data) in PostgreSQL, within the partitioned <code>events</code> table you created earlier. The next step of the pipeline is to aggregate this data into rollup tables so it can be efficiently accessed by their dashboard app or BI tools without impacting performance on the raw data tables.</p>
<p>Rollups are an integral piece of this solution because they provide fast, indexed lookups of aggregates where compute-heavy work is performed periodically in the background. Because these rollups are compact, they can easily be consumed by various clients and kept over longer periods of time.</p>
<p>When you look at the SQL scripts for the <code>five_minutely_aggregation</code> and <code>hourly_aggregation</code> functions below, you will notice that we are using incremental aggregation to support late, or incoming, data. This is accomplished by using <code>ON CONFLICT ... DO UPDATE</code> in the <code>INSERT</code> statement.</p>
<p>When executing aggregations, you have the choice between append-only or incremental aggregation. Append-only aggregation (insert) supports all aggregates, including exact distinct and percentiles, but are more difficult to use when handling late data. This is because you have to keep track of which time periods have been aggregated already, since you aggregate events for a particular time period and append them to the rollup table once all the data for that period are available. Incremental aggregation (upsert), on the other hand, easily supports processing late data. The side effect is that it cannot handle all aggregates. We work around this limitation by using highly accurate approximation through HyperLogLog (HLL) and <code>TopN</code>. As stated previously, we are aggregating new events and upserting them to our rollup tables. You still need to be able to keep track of which events have already been aggregated. We will do that by tracking the sequence number. There are a few other approaches to do this, and you can read more about why this approach is recommended <a href="https://www.citusdata.com/blog/2018/06/14/scalable-incremental-data-aggregation/" rel="nofollow">here</a>.</p>
<p>Advanced aggregation is accomplished by using HyperLogLog (HLL) and <code>TopN</code>, as discussed earlier. For this topic, reference the <code>five_minutely_aggregation</code> and <code>hourly_aggregation</code> functions below. Also, please note that where you see the special <code>excluded</code> table in the query, it is used to reference values originally proposed for insertion. We are using <code>hll_has_bigint</code> to hash the HLL columns <code>device_id</code> and <code>session_id</code>. This hash function produces a uniformly distributed bit string. HLL does this by dividing values into streams and averaging the results. The <code>hll_add_agg</code> and <code>hll_union</code> are used to do incremental rollups. <code>TopN</code> keeps track of a set of counters in JSONB with the explicit goal of determining the top N (like top 10) items (or our "heavy hitters"). In our case, we're using it to return the top 1000 devices by <code>device_id</code>. Similar to HLL, we are using <code>topn_add_agg</code> and <code>topn_union</code> to do incremental rollups. The <code>topn_union</code> function merges <code>TopN</code> objects over time periods and dimensions.</p>
<h3><a id="user-content-task-1-create-functions-to-rollup-data" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-1-create-functions-to-rollup-data"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 1: Create functions to rollup data</h3>
<ol>
<li>
<p>Open <strong>pgAdmin</strong> once more. If you no longer have the Query Editor open, expand the <strong>Lab</strong> server under the Servers tree in pgAdmin, expand Databases then select <strong>citus</strong>. When the citus database is highlighted, select the <strong>Query Tool</strong> button above.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pgadmin-query-tool-button.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pgadmin-query-tool-button.png" alt="The citus database is selected in pgAdmin, and the Query Tool is highlighted." title="Query Tool" style="max-width:100%;"></a></p>
</li>
<li>
<p>Within the Query Editor, clear the previous query if needed, paste the following, then <strong>execute the query</strong>.</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">CREATE</span> <span class="pl-k">TABLE</span> <span class="pl-en">rollups</span> (
    name <span class="pl-k">text</span> <span class="pl-k">primary key</span>,
    event_table_name <span class="pl-k">text</span> <span class="pl-k">not null</span>,
    event_id_sequence_name <span class="pl-k">text</span> <span class="pl-k">not null</span>,
    last_aggregated_id <span class="pl-k">bigint</span> default <span class="pl-c1">0</span>
);

<span class="pl-k">CREATE OR REPLACE</span> <span class="pl-k">FUNCTION</span> <span class="pl-en">incremental_rollup_window</span>(rollup_name <span class="pl-k">text</span>, OUT window_start <span class="pl-k">bigint</span>, OUT window_end <span class="pl-k">bigint</span>)
RETURNS record
LANGUAGE plpgsql
<span class="pl-k">AS</span> $function$
DECLARE
    table_to_lock regclass;
<span class="pl-k">BEGIN</span>
    <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">    * Perform aggregation from the last aggregated ID + 1 up to the last committed ID.</span>
<span class="pl-c">    * We do a SELECT .. FOR UPDATE on the row in the rollup table to prevent</span>
<span class="pl-c">    * aggregations from running concurrently.</span>
<span class="pl-c">    <span class="pl-c">*/</span></span>
    <span class="pl-k">SELECT</span> event_table_name, last_aggregated_id<span class="pl-k">+</span><span class="pl-c1">1</span>, pg_sequence_last_value(event_id_sequence_name)
    INTO table_to_lock, window_start, window_end
    <span class="pl-k">FROM</span> rollups
    <span class="pl-k">WHERE</span> name <span class="pl-k">=</span> rollup_name FOR <span class="pl-k">UPDATE</span>;

    IF NOT FOUND THEN
        RAISE <span class="pl-s"><span class="pl-pds">'</span>rollup <span class="pl-pds">'</span><span class="pl-pds">'</span>%<span class="pl-pds">'</span><span class="pl-pds">'</span> is not in the rollups table<span class="pl-pds">'</span></span>, rollup_name;
    END IF;

    IF window_end IS <span class="pl-k">NULL</span> THEN
        <span class="pl-c"><span class="pl-c">/*</span> sequence was never used <span class="pl-c">*/</span></span>
        window_end :<span class="pl-k">=</span> <span class="pl-c1">0</span>;
        RETURN;
    END IF;

    <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">    * Play a little trick: We very briefly lock the table for writes in order to</span>
<span class="pl-c">    * wait for all pending writes to finish. That way, we are sure that there are</span>
<span class="pl-c">    * no more uncommitted writes with a identifier lower or equal to window_end.</span>
<span class="pl-c">    * By throwing an exception, we release the lock immediately after obtaining it</span>
<span class="pl-c">    * such that writes can resume.</span>
<span class="pl-c">    <span class="pl-c">*/</span></span>
    <span class="pl-k">BEGIN</span>
        EXECUTE format(<span class="pl-s"><span class="pl-pds">'</span>LOCK %s IN EXCLUSIVE MODE<span class="pl-pds">'</span></span>, table_to_lock);
        RAISE <span class="pl-s"><span class="pl-pds">'</span>release table lock<span class="pl-pds">'</span></span>;
    EXCEPTION WHEN OTHERS THEN
    END;

    <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">    * Remember the end of the window to continue from there next time.</span>
<span class="pl-c">    <span class="pl-c">*/</span></span>
    <span class="pl-k">UPDATE</span> rollups <span class="pl-k">SET</span> last_aggregated_id <span class="pl-k">=</span> window_end <span class="pl-k">WHERE</span> name <span class="pl-k">=</span> rollup_name;
END;
$function$;

<span class="pl-c"><span class="pl-c">--</span> Entries for the rollup tables so that they are getting tracked in incremental rollup process.</span>
<span class="pl-k">INSERT INTO</span> rollups (name, event_table_name, event_id_sequence_name)
<span class="pl-k">VALUES</span> (<span class="pl-s"><span class="pl-pds">'</span>rollup_events_5min<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>events<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>events_event_id_seq<span class="pl-pds">'</span></span>);

<span class="pl-k">INSERT INTO</span> rollups (name, event_table_name, event_id_sequence_name)
<span class="pl-k">VALUES</span> (<span class="pl-s"><span class="pl-pds">'</span>rollup_events_1hr<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>events<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>events_event_id_seq<span class="pl-pds">'</span></span>);</pre></div>
</li>
<li>
<p>Replace the previous query with the following in the Query Editor to create a rollup function that populates the <strong>5-minute rollup table</strong>. Then <strong>execute the query</strong>.</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">CREATE OR REPLACE</span> <span class="pl-k">FUNCTION</span> <span class="pl-en">five_minutely_aggregation</span>(OUT start_id <span class="pl-k">bigint</span>, OUT end_id <span class="pl-k">bigint</span>)
RETURNS record
LANGUAGE plpgsql
<span class="pl-k">AS</span> $function$
<span class="pl-k">BEGIN</span>
    <span class="pl-c"><span class="pl-c">/*</span> determine which page views we can safely aggregate <span class="pl-c">*/</span></span>
    <span class="pl-k">SELECT</span> window_start, window_end INTO start_id, end_id
    <span class="pl-k">FROM</span> incremental_rollup_window(<span class="pl-s"><span class="pl-pds">'</span>rollup_events_5min<span class="pl-pds">'</span></span>);

    <span class="pl-c"><span class="pl-c">/*</span> exit early if there are no new page views to aggregate <span class="pl-c">*/</span></span>
    IF start_id <span class="pl-k">&gt;</span> end_id THEN RETURN; END IF;

    <span class="pl-c"><span class="pl-c">/*</span> aggregate the page views, merge results if the entry already exists <span class="pl-c">*/</span></span>
    <span class="pl-k">INSERT INTO</span> rollup_events_5min
        <span class="pl-k">SELECT</span> customer_id,
                event_type,
                country,
                browser,
                date_trunc(<span class="pl-s"><span class="pl-pds">'</span>seconds<span class="pl-pds">'</span></span>, (event_time <span class="pl-k">-</span> <span class="pl-k">TIMESTAMP</span> <span class="pl-s"><span class="pl-pds">'</span>epoch<span class="pl-pds">'</span></span>) <span class="pl-k">/</span> <span class="pl-c1">300</span>) <span class="pl-k">*</span> <span class="pl-c1">300</span> <span class="pl-k">+</span> <span class="pl-k">TIMESTAMP</span> <span class="pl-s"><span class="pl-pds">'</span>epoch<span class="pl-pds">'</span></span> <span class="pl-k">AS</span> minute,
                <span class="pl-c1">count</span>(<span class="pl-k">*</span>) <span class="pl-k">as</span> event_count,
                hll_add_agg(hll_hash_bigint(device_id)) <span class="pl-k">as</span> device_distinct_count,
                hll_add_agg(hll_hash_bigint(session_id)) <span class="pl-k">as</span> session_distinct_count,
                topn_add_agg(device_id::<span class="pl-k">text</span>) top_devices_1000
        <span class="pl-k">FROM</span> events <span class="pl-k">WHERE</span> event_id BETWEEN start_id <span class="pl-k">AND</span> end_id
        <span class="pl-k">GROUP BY</span> customer_id,event_type,country,browser,minute
        <span class="pl-k">ON</span> CONFLICT (customer_id,event_type,country,browser,minute)
        DO <span class="pl-k">UPDATE</span>
        <span class="pl-k">SET</span> event_count<span class="pl-k">=</span><span class="pl-c1">rollup_events_5min</span>.<span class="pl-c1">event_count</span><span class="pl-k">+</span><span class="pl-c1">excluded</span>.<span class="pl-c1">event_count</span>,
            device_distinct_count <span class="pl-k">=</span> hll_union(<span class="pl-c1">rollup_events_5min</span>.<span class="pl-c1">device_distinct_count</span>, <span class="pl-c1">excluded</span>.<span class="pl-c1">device_distinct_count</span>),
            session_distinct_count<span class="pl-k">=</span> hll_union(<span class="pl-c1">rollup_events_5min</span>.<span class="pl-c1">session_distinct_count</span>, <span class="pl-c1">excluded</span>.<span class="pl-c1">session_distinct_count</span>),
            top_devices_1000 <span class="pl-k">=</span> topn_union(<span class="pl-c1">rollup_events_5min</span>.<span class="pl-c1">top_devices_1000</span>, <span class="pl-c1">excluded</span>.<span class="pl-c1">top_devices_1000</span>);

END;
$function$;</pre></div>
</li>
<li>
<p>Replace the previous query with the following in the Query Editor to create a rollup function that populates the <strong>hourly rollup table</strong>. Then <strong>execute the query</strong>.</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">CREATE OR REPLACE</span> <span class="pl-k">FUNCTION</span> <span class="pl-en">hourly_aggregation</span>(OUT start_id <span class="pl-k">bigint</span>, OUT end_id <span class="pl-k">bigint</span>)
RETURNS record
LANGUAGE plpgsql
<span class="pl-k">AS</span> $function$
<span class="pl-k">BEGIN</span>
    <span class="pl-c"><span class="pl-c">/*</span> determine which page views we can safely aggregate <span class="pl-c">*/</span></span>
    <span class="pl-k">SELECT</span> window_start, window_end INTO start_id, end_id
    <span class="pl-k">FROM</span> incremental_rollup_window(<span class="pl-s"><span class="pl-pds">'</span>rollup_events_1hr<span class="pl-pds">'</span></span>);

    <span class="pl-c"><span class="pl-c">/*</span> exit early if there are no new page views to aggregate <span class="pl-c">*/</span></span>
    IF start_id <span class="pl-k">&gt;</span> end_id THEN RETURN; END IF;

    <span class="pl-c"><span class="pl-c">/*</span> aggregate the page views, merge results if the entry already exists <span class="pl-c">*/</span></span>
    <span class="pl-k">INSERT INTO</span> rollup_events_1hr
       <span class="pl-k">SELECT</span> customer_id,
               event_type,
               country,
               browser,
               date_trunc(<span class="pl-s"><span class="pl-pds">'</span>hour<span class="pl-pds">'</span></span>, event_time) <span class="pl-k">as</span> hour,
               <span class="pl-c1">count</span>(<span class="pl-k">*</span>) <span class="pl-k">as</span> event_count,
               hll_add_agg(hll_hash_bigint(device_id)) <span class="pl-k">as</span> device_distinct_count,
               hll_add_agg(hll_hash_bigint(session_id)) <span class="pl-k">as</span> session_distinct_count,
               topn_add_agg(device_id::<span class="pl-k">text</span>) top_devices_1000
       <span class="pl-k">FROM</span> events <span class="pl-k">WHERE</span> event_id BETWEEN start_id <span class="pl-k">AND</span> end_id
       <span class="pl-k">GROUP BY</span> customer_id,event_type,country,browser,hour
       <span class="pl-k">ON</span> CONFLICT (customer_id,event_type,country,browser,hour)
       DO <span class="pl-k">UPDATE</span>
       <span class="pl-k">SET</span> event_count <span class="pl-k">=</span> <span class="pl-c1">rollup_events_1hr</span>.<span class="pl-c1">event_count</span><span class="pl-k">+</span><span class="pl-c1">excluded</span>.<span class="pl-c1">event_count</span>,
           device_distinct_count <span class="pl-k">=</span> hll_union(<span class="pl-c1">rollup_events_1hr</span>.<span class="pl-c1">device_distinct_count</span>,<span class="pl-c1">excluded</span>.<span class="pl-c1">device_distinct_count</span>),
           session_distinct_count <span class="pl-k">=</span> hll_union(<span class="pl-c1">rollup_events_1hr</span>.<span class="pl-c1">session_distinct_count</span>,<span class="pl-c1">excluded</span>.<span class="pl-c1">session_distinct_count</span>),
           top_devices_1000 <span class="pl-k">=</span> topn_union(<span class="pl-c1">rollup_events_1hr</span>.<span class="pl-c1">top_devices_1000</span>, <span class="pl-c1">excluded</span>.<span class="pl-c1">top_devices_1000</span>);
END;
$function$;</pre></div>
</li>
</ol>
<h3><a id="user-content-task-2-schedule-periodic-aggregation-and-execute-dashboard-queries" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-2-schedule-periodic-aggregation-and-execute-dashboard-queries"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 2: Schedule periodic aggregation and execute dashboard queries</h3>
<p>In this task, you will use <a href="https://github.com/citusdata/pg_cron">pg_cron</a> to run the aggregation functions on a periodic basis.</p>
<p>You will then execute queries against the rollup tables that can be used for WWI's dashboard. This is to demonstrate that queries against the pre-aggregated tables that use HLL and TopN advanced aggregation features result in excellent query speeds and flexibility.</p>
<ol>
<li>
<p>Replace the previous query with the following in the Query Editor to schedule the rollup functions to execute every 5 minutes, then <strong>execute the query</strong>.</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> <span class="pl-c1">cron</span>.<span class="pl-c1">schedule</span>(<span class="pl-s"><span class="pl-pds">'</span>*/5 * * * *<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>SELECT five_minutely_aggregation();<span class="pl-pds">'</span></span>);
<span class="pl-k">SELECT</span> <span class="pl-c1">cron</span>.<span class="pl-c1">schedule</span>(<span class="pl-s"><span class="pl-pds">'</span>*/5 * * * *<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>SELECT hourly_aggregation();<span class="pl-pds">'</span></span>);</pre></div>
</li>
<li>
<p>Ensure that the <strong>KafkaProducer</strong> console app is still running and sending data. If not, start it again.</p>
</li>
<li>
<p><strong>Switch back</strong> to pgAdmin. Although we set the cron schedule to run our query aggregates every five minutes, it is possible that they have not yet run. For now, replace the previous query in the Query Editor with the following to manually run the <strong>5-minute aggregation</strong> query.</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> five_minutely_aggregation();</pre></div>
</li>
<li>
<p>Replace the previous query with the following in the Query Editor to re-run our <strong>hourly aggregation</strong> function. Then <strong>execute the query</strong>.</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> hourly_aggregation();</pre></div>
<blockquote>
<p>The following queries don‚Äôt have a <code>customer_id</code> in the filter, so these queries will be executed in parallel across all the different nodes in the cluster, leading to fast query performance.</p>
</blockquote>
</li>
<li>
<p>Clear the query window and paste the following to retrieve the total number of events and count of distinct devices in the last 15 minutes:</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> <span class="pl-c1">sum</span>(event_count) num_events, ceil(hll_cardinality(hll_union_agg(device_distinct_count))) distinct_devices
<span class="pl-k">FROM</span> rollup_events_5min <span class="pl-k">where</span> minute <span class="pl-k">&gt;=</span>now()<span class="pl-k">-</span>interval <span class="pl-s"><span class="pl-pds">'</span>15 minutes<span class="pl-pds">'</span></span> <span class="pl-k">AND</span> minute <span class="pl-k">&lt;=</span>now();</pre></div>
<blockquote>
<p><strong>Note:</strong> If you do not see any values in the result, try adjusting the <code>15 minutes</code> interval value to a higher value. If more than fifteen minutes have passed since ingesting the data, you will not see results until you increase this value.</p>
</blockquote>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/dashboard-query1.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/dashboard-query1.png" alt="The results output of the first dashboard query is displayed." title="Dashboard query 1" style="max-width:100%;"></a></p>
</li>
<li>
<p>Clear the query window and paste the following to return the count of distinct sessions over the past week:</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> <span class="pl-c1">sum</span>(event_count) num_events,
      ceil(hll_cardinality(hll_union_agg(device_distinct_count))) distinct_devices
<span class="pl-k">FROM</span> rollup_events_1hr
<span class="pl-k">WHERE</span> hour <span class="pl-k">&gt;=</span>date_trunc(<span class="pl-s"><span class="pl-pds">'</span>day<span class="pl-pds">'</span></span>,now())<span class="pl-k">-</span>interval <span class="pl-s"><span class="pl-pds">'</span>7 days<span class="pl-pds">'</span></span>
  <span class="pl-k">AND</span> hour <span class="pl-k">&lt;=</span>now();</pre></div>
</li>
<li>
<p>Clear the query window and paste the following to return the trend of app usage in the past 2 days, broken down by hour:</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> hour,
      <span class="pl-c1">sum</span>(event_count) event_count,
      ceil(hll_cardinality(hll_union_agg(device_distinct_count))) device_count,
      ceil(hll_cardinality(hll_union_agg(session_distinct_count))) session_count
<span class="pl-k">FROM</span> rollup_events_1hr
<span class="pl-k">WHERE</span> hour <span class="pl-k">&gt;=</span>date_trunc(<span class="pl-s"><span class="pl-pds">'</span>day<span class="pl-pds">'</span></span>,now())<span class="pl-k">-</span>interval <span class="pl-s"><span class="pl-pds">'</span>2 days<span class="pl-pds">'</span></span>
  <span class="pl-k">AND</span> hour <span class="pl-k">&lt;=</span>now()
<span class="pl-k">GROUP BY</span> hour;</pre></div>
<blockquote>
<p>As the next two queries have a filter on <code>customer_id</code>, Citus will route the queries to only the node which has the data for that particular customer without needing to touch data for the remaining customers. This leads to faster performance as you need to scan only a small portion of the data.</p>
</blockquote>
</li>
<li>
<p>Clear the query window and paste the following to retrieve the total number of events and count of distinct devices in the last 15 minutes by <code>customer_id</code>. Remember, the data is sharded by tenant (Customer ID):</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> <span class="pl-c1">sum</span>(event_count) num_events, ceil(hll_cardinality(hll_union_agg(device_distinct_count))) distinct_devices
<span class="pl-k">FROM</span> rollup_events_5min <span class="pl-k">where</span> minute <span class="pl-k">&gt;=</span>now()<span class="pl-k">-</span>interval <span class="pl-s"><span class="pl-pds">'</span>15 minutes<span class="pl-pds">'</span></span> <span class="pl-k">AND</span> minute <span class="pl-k">&lt;=</span>now() <span class="pl-k">AND</span> customer_id<span class="pl-k">=</span><span class="pl-c1">1</span>;</pre></div>
</li>
<li>
<p>Clear the query window and paste the following to return the top devices in the past 30 minutes for customer 2:</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> (topn(topn_union_agg(top_devices_1000), <span class="pl-c1">10</span>)).item device_id
<span class="pl-k">FROM</span> rollup_events_5min
<span class="pl-k">WHERE</span> minute <span class="pl-k">&gt;=</span>date_trunc(<span class="pl-s"><span class="pl-pds">'</span>day<span class="pl-pds">'</span></span>,now())<span class="pl-k">-</span>interval <span class="pl-s"><span class="pl-pds">'</span>30 minutes<span class="pl-pds">'</span></span>
  <span class="pl-k">AND</span> minute <span class="pl-k">&lt;=</span>now()
  <span class="pl-k">AND</span> customer_id<span class="pl-k">=</span><span class="pl-c1">2</span>;</pre></div>
</li>
</ol>
<h2><a id="user-content-exercise-5-create-advanced-visualizations-in-power-bi" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#exercise-5-create-advanced-visualizations-in-power-bi"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exercise 5: Create advanced visualizations in Power BI</h2>
<p>In this exercise, you will connect to your PostgreSQL database cluster in <a href="https://powerbi.microsoft.com/desktop/" rel="nofollow">Power BI Desktop</a> and create advanced visualizations. Then you will export the report to Power BI online so it can be accessed by others and embedded in external websites.</p>
<h3><a id="user-content-task-1-connect-to-your-postgres-data-from-power-bi" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-1-connect-to-your-postgres-data-from-power-bi"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 1: Connect to your Postgres data from Power BI</h3>
<ol>
<li>
<p>Open Power BI Desktop, then select <strong>Get data</strong>.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-get-data.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-get-data.png" alt="Get data is highlighted." title="Power BI Desktop" style="max-width:100%;"></a></p>
</li>
<li>
<p>In the Get Data dialog, search for <code>postgres</code> then select the <strong>PostgreSQL database</strong> option. Click <strong>Connect</strong>.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-postgres-data-source-search.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-postgres-data-source-search.png" alt="The PostgreSQL database data source is selected." title="Get Data" style="max-width:100%;"></a></p>
</li>
<li>
<p>If you see the following error after clicking <strong>Connect</strong>, you need to <a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/Before%20the%20HOL%20-%20Managed%20open%20source%20databases%20on%20Azure.md#Task-7-Install-Npgsql">install Npgsql</a> on your machine, or reboot if you have already completed the installation.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-postgresql-error.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-postgresql-error.png" alt="Dialog says this connector requires one or more additional components to be installed before it can be used." title="PostgreSQL database error" style="max-width:100%;"></a></p>
</li>
<li>
<p>In the PostgreSQL database dialog, enter the following into the displayed fields, then click <strong>OK</strong>:</p>
<ul>
<li><strong>Server</strong>: paste the host value from the connection string you copied earlier (the string of text between <code>jdbc:postgresql://</code> and <code>/citus?</code>. For example: <code>&lt;your-server-name&gt;.postgres.database.azure.com:5432</code>), be sure to include the port at the end (<code>:5432</code>).</li>
<li><strong>Database</strong>: enter <strong>citus</strong>.</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-postgresql-server.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-postgresql-server.png" alt="The Server and Database fields are displayed." title="PostgreSQL database" style="max-width:100%;"></a></p>
</li>
<li>
<p>Enter the following in the form that follows, then click <strong>Connect</strong>:</p>
<ul>
<li><strong>User name</strong>: Enter <strong>citus</strong>.</li>
<li><strong>Password</strong>: Enter your database password.</li>
<li><strong>Select which level to apply these settings to</strong>: Leave at default value.</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-postgresql-server-creds.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-postgresql-server-creds.png" alt="The credentials form is displayed." title="PostgreSQL database" style="max-width:100%;"></a></p>
</li>
<li>
<p>In the next screen, a list of tables will appear. Check the box next to <strong>public.events</strong>, then click <strong>Load</strong>.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-navigator.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-navigator.png" alt="The public.events table is selected." title="Navigator" style="max-width:100%;"></a></p>
<blockquote>
<p>Notice that there are several tables whose name starts with <code>public.events</code>. This is because of the automatic sharding of the table. The Hyperscale cluster takes care of selecting data from the appropriate shard when you select from the <code>public.events</code> table, and handles writing to a shard as well.</p>
</blockquote>
</li>
</ol>
<h3><a id="user-content-task-2-create-report" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-2-create-report"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 2: Create report</h3>
<ol>
<li>
<p>In a few moments, you will see a blank report canvas. Select the <strong>Map</strong> visualization from the Visualizations toolbox on the right-hand side.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-map-icon.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-map-icon.png" alt="The Map visualization is highlighted." title="Visualizations" style="max-width:100%;"></a></p>
</li>
<li>
<p>Drag the <strong>country</strong> field from the <code>events</code> table to <strong>Location</strong>, and <strong>event_type</strong> to <strong>Size</strong> within the Map visualization settings.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-map-settings.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-map-settings.png" alt="The fields are shown in their respective locations in the Map settings." title="Map settings" style="max-width:100%;"></a></p>
</li>
<li>
<p>Your Map visualization should look similar to the following:</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-map.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-map.png" alt="The Map visualization is displayed." title="Map" style="max-width:100%;"></a></p>
</li>
<li>
<p>Click anywhere on the blank canvas to deselect the Map. Select the <strong>Treemap</strong> visualization.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-treemap-icon.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-treemap-icon.png" alt="The Treemap visualization is highlighted." title="Visualizations" style="max-width:100%;"></a></p>
</li>
<li>
<p>Drag the <strong>event_id</strong> field from the <code>events</code> table to <strong>Values</strong>, and <strong>event_type</strong> to <strong>Group</strong> within the Treemap visualization settings.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-treemap-settings.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-treemap-settings.png" alt="The fields are showin in their respective locations in the Treemap settings." title="Treemap settings" style="max-width:100%;"></a></p>
</li>
<li>
<p>Your Treemap visualization should look similar to the following:</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-treemap.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-treemap.png" alt="The Treemap visualization is displayed." title="Treemap" style="max-width:100%;"></a></p>
</li>
<li>
<p>Click anywhere on the blank canvas to deselect the Map. Select the <strong>Line and clustered column chart</strong> visualization.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-line-icon.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-line-icon.png" alt="The Line and clustered column chart visualization is highlighted." title="Visualizations" style="max-width:100%;"></a></p>
</li>
<li>
<p>Drag the <strong>country</strong> field from the <code>events</code> table to <strong>Column series</strong>, <strong>event_type</strong> to <strong>Shared axis</strong>, and <strong>session_id</strong> to <strong>Column values</strong> within the Line and clustered column chart visualization settings.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-line-settings.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-line-settings.png" alt="The fields are showin in their respective locations in the Line and clustered column chart settings." title="Visualization settings" style="max-width:100%;"></a></p>
</li>
<li>
<p>Your visualization should look similar to the following:</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-line.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-line.png" alt="The visualization is displayed." title="Line and clustered column chart" style="max-width:100%;"></a></p>
</li>
<li>
<p>Click anywhere on the blank canvas to deselect the Map. Select the <strong>Ribbon chart</strong> visualization.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-ribbon-chart.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-ribbon-chart.png" alt="The Ribbon chart visualization is highlighted." title="Visualizations" style="max-width:100%;"></a></p>
</li>
<li>
<p>Drag the <strong>browser</strong> field from the <code>events</code> table to <strong>Legend</strong>, <strong>country</strong> to <strong>Axis</strong>, and <strong>event_id</strong> to <strong>Value</strong> within the Ribbon chart visualization settings.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-ribbon-settings.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-ribbon-settings.png" alt="The fields are showin in their respective locations in the Ribbon chart settings." title="Visualization settings" style="max-width:100%;"></a></p>
</li>
<li>
<p>Your Ribbon chart visualization should look similar to the following:</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-ribbon.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-ribbon.png" alt="The visualization is displayed." title="Ribbon chart" style="max-width:100%;"></a></p>
</li>
<li>
<p>When you are done, the report should look like the following. You can click on any item to filter all visualizations. For instance, we selected <strong>download</strong> on the <strong>Treemap</strong> visualization to apply the filter to display only download activities on each chart.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-filtered-report.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-filtered-report.png" alt="A filtered view of the finished report is displayed." title="Power BI filtered report" style="max-width:100%;"></a></p>
</li>
</ol>
<h3><a id="user-content-task-3-save-and-publish-report" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-3-save-and-publish-report"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 3: Save and publish report</h3>
<p>To share your report with others or to enable embedding the report within websites or mobile devices, you can publish it to the online Power BI service.</p>
<ol>
<li>
<p>Click the <strong>Publish</strong> button in the ribbon bar above.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-publish-button.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-publish-button.png" alt="The Publish button is highlighted in the ribbon bar." title="Publish" style="max-width:100%;"></a></p>
</li>
<li>
<p>When prompted to save your changes, click <strong>Save</strong> to save your report to your machine.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-save.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-save.png" alt="A dialog asking whether to save changes is displayed." title="Save changes" style="max-width:100%;"></a></p>
</li>
<li>
<p>In the Publish dialog, select the <strong>My workspace</strong> destination, then click <strong>Select</strong>.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-publish-destination.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-publish-destination.png" alt="The My Workspace destination is selected." title="Publish to Power BI" style="max-width:100%;"></a></p>
</li>
<li>
<p>In a few moments, you will receive a confirmation that your report was successfully published. Select the link to open your report in Power BI.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-publish-success.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-publish-success.png" alt="The Open in Power BI link is highlighted." title="Publishing to Power BI" style="max-width:100%;"></a></p>
</li>
<li>
<p>A new browser tab will open, taking you to your published report on the <a href="https://app.powerbi.com/" rel="nofollow">Power BI website</a>. Create a new dashboard by selecting <strong>Pin Live Page</strong> in the toolbar above the report.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-website-report.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-website-report.png" alt="The Pin Live Page option is highlighted." title="Power BI website" style="max-width:100%;"></a></p>
</li>
<li>
<p>In the Pin to dashboard dialog, select <strong>New dashboard</strong> and enter a <strong>Dashboard name</strong>, then select <strong>Pin live</strong>.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/media/pbi-website-pin-live.png"><img src="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/raw/master/Hands-on%20lab/media/pbi-website-pin-live.png" alt="The pin to dashboard dialog is displayed." title="Pin to dashboard" style="max-width:100%;"></a></p>
</li>
</ol>
<p>You now have the ability to share your report with others, view a mobile version, and edit the published version of your report.</p>
<h2><a id="user-content-after-the-hands-on-lab" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#after-the-hands-on-lab"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>After the hands-on lab</h2>
<p>Duration: 10 mins</p>
<p>In this exercise, you will delete any Azure resources that were created in support of the lab. You should follow all steps provided after attending the Hands-on lab to ensure your account does not continue to be charged for lab resources.</p>
<h3><a id="user-content-task-1-delete-the-resource-group" class="anchor" aria-hidden="true" href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md#task-1-delete-the-resource-group"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Task 1: Delete the resource group</h3>
<ol>
<li>
<p>Using the <a href="https://portal.azure.com/" rel="nofollow">Azure portal</a>, navigate to the Resource group you used throughout this hands-on lab by selecting Resource groups in the left menu.</p>
</li>
<li>
<p>Search for the name of your resource group, and select it from the list.</p>
</li>
<li>
<p>Select Delete in the command bar, and confirm the deletion by re-typing the Resource group name, and selecting Delete.</p>
</li>
</ol>
<p>You should follow all steps provided <em>after</em> attending the Hands-on lab.</p>
</article>
  </div>

    </div>

  

  <details class="details-reset details-overlay details-overlay-dark">
    <summary data-hotkey="l" aria-label="Jump to line" role="button"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast linejump" aria-label="Jump to line" role="dialog" aria-modal="true">
      <!-- '"` --><!-- </textarea></xmp> --><form class="js-jump-to-line-form Box-body d-flex" action="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="‚úì">
        <input class="form-control flex-auto mr-3 linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line‚Ä¶" aria-label="Jump to line" autofocus="">
        <button type="submit" class="btn" data-close-dialog="">Go</button>
</form>    </details-dialog>
  </details>



  </div>
</div>

    </main>
  </div>
  

  </div>

        
<div class="footer container-lg width-full p-responsive" role="contentinfo">
  <div class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      <li class="mr-3 mr-lg-0">¬© 2019 <span title="0.37533s from unicorn-58bb4478f6-jnsn9">GitHub</span>, Inc.</li>
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to terms, text:terms" href="https://github.com/site/terms">Terms</a></li>
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to privacy, text:privacy" href="https://github.com/site/privacy">Privacy</a></li>
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to security, text:security" href="https://github.com/security">Security</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://githubstatus.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a data-ga-click="Footer, go to help, text:help" href="https://help.github.com/">Help</a></li>
    </ul>

    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mx-lg-4" href="https://github.com/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
</a>
   <ul class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to contact, text:contact" href="https://github.com/contact">Contact GitHub</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://github.com/pricing" data-ga-click="Footer, go to Pricing, text:Pricing">Pricing</a></li>
      <li class="mr-3 mr-lg-0"><a href="https://developer.github.com/" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3 mr-lg-0"><a href="https://training.github.com/" data-ga-click="Footer, go to training, text:training">Training</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://github.blog/" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>

    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
    </button>
    You can‚Äôt perform that action at this time.
  </div>


    
    <script crossorigin="anonymous" integrity="sha512-r0qr0yPIJ6YFB7vdGgFJ1Vd2q+vgeaQx3JWrmjfIo7Cp+J10vlj+7EbYo+bQweU9Thij8aLiqX78ysca/qGmTA==" type="application/javascript" src="https://github.githubassets.com/assets/frameworks-af59ea89.js"></script>
    
    <script crossorigin="anonymous" async="async" integrity="sha512-NeZ6hcDgZ/CkHZeiveqURgFandkzXj3sDXgxbryvq+DqsisB+nyM3jLGlm7qDocM+U7etnG/BfFHEPG9mPFOIQ==" type="application/javascript" src="https://github.githubassets.com/assets/github-bootstrap-f7a8d636.js"></script>
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner" hidden="">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="https://github.com/microsoft/MCW-Real-time-data-with-Azure-Database-for-PostgreSQL-Hyperscale/blob/master/Hands-on%20lab/HOL%20step-by%20step%20-%20Real-time%20data%20with%20Azure%20Database%20for%20PostgreSQL%20Hyperscale.md">Reload</a> to refresh your session.</span>
  </div>
  <template id="site-details-dialog"></template>

  <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box box-shadow-large" style="width:360px;">
  </div>
</div>

  <div aria-live="polite" class="js-global-screen-reader-notice sr-only"></div>

  


</body></html>